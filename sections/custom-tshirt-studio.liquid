{% comment %}
  Custom T-Shirt Design Studio Section
  Modern, clean interface for custom t-shirt design
{% endcomment %}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    .custom-tshirt-studio-{{ section.id }} * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    .custom-tshirt-studio-{{ section.id }} {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        min-height: 100vh;
        color: #e2e8f0;
        padding: 0;
    }

    .cts-header-{{ section.id }} {
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(10px);
        padding: 20px 40px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .cts-header-{{ section.id }} h1 {
        font-size: 24px;
        font-weight: 700;
        background: linear-gradient(135deg, #60a5fa, #a78bfa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .cts-container-{{ section.id }} {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
        display: grid;
        grid-template-columns: 1fr 400px;
        gap: 40px;
    }

    .cts-preview-section-{{ section.id }} {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .cts-preview-card-{{ section.id }} {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .cts-mockup-stage-{{ section.id }} {
        position: relative;
        width: 100%;
        aspect-ratio: 1;
        background: linear-gradient(135deg, #27e1c1 0%, #667eea 20%, #764ba2 35%, #f093fb 50%, #4facfe 65%, #27e1c1 100%);
        background-size: 300% 300%;
        animation: gradientShift-{{ section.id }} 15s ease infinite;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 25px 80px rgba(39, 225, 193, 0.2);
    }

    @keyframes gradientShift-{{ section.id }} {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }

    .cts-mockup-canvas-{{ section.id }} {
        position: relative;
        width: 100%;
        height: 100%;
        background: #f8fafc;
        border-radius: 16px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .cts-tshirt-container-{{ section.id }} {
        position: relative;
        width: 85%;
        height: 85%;
    }

    .cts-tshirt-image-{{ section.id }} {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    .cts-design-overlay-{{ section.id }} {
        position: absolute;
        width: 37%;
        height: 42%;
        left: 50%;
        top: 29%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: move;
        transition: all 0.2s ease;
    }

    .cts-design-overlay-{{ section.id }}:hover {
        outline: 2px dashed rgba(96, 165, 250, 0.5);
        outline-offset: 4px;
    }

    .cts-design-text-{{ section.id }} {
        font-family: 'Bebas Neue', sans-serif;
        font-size: 32px;
        font-weight: bold;
        color: #000000;
        text-align: center;
        user-select: none;
        pointer-events: none;
    }

    .cts-design-image-{{ section.id }} {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        pointer-events: none;
    }

    .cts-quick-actions-{{ section.id }} {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
    }

    .cts-quick-action-btn-{{ section.id }} {
        flex: 1;
        min-width: 150px;
        padding: 14px 20px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        color: white;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .cts-quick-action-btn-{{ section.id }}:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
    }

    .cts-controls-panel-{{ section.id }} {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .cts-control-card-{{ section.id }} {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 24px;
    }

    .cts-control-card-{{ section.id }} h3 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 16px;
        color: #f1f5f9;
    }

    .cts-control-group-{{ section.id }} {
        margin-bottom: 20px;
    }

    .cts-control-group-{{ section.id }}:last-child {
        margin-bottom: 0;
    }

    .cts-control-card-{{ section.id }} label {
        display: block;
        font-size: 13px;
        font-weight: 500;
        color: #cbd5e1;
        margin-bottom: 8px;
    }

    .cts-text-input-{{ section.id }} {
        width: 100%;
        padding: 12px 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        color: white;
        font-size: 14px;
        font-family: inherit;
        transition: all 0.2s;
    }

    .cts-text-input-{{ section.id }}:focus {
        outline: none;
        border-color: #60a5fa;
        background: rgba(255, 255, 255, 0.08);
    }

    .cts-text-input-{{ section.id }} textarea {
        resize: vertical;
        min-height: 80px;
    }

    .cts-file-input-{{ section.id }} {
        display: none;
    }

    .cts-file-upload-btn-{{ section.id }} {
        width: 100%;
        padding: 12px;
        background: rgba(96, 165, 250, 0.1);
        border: 2px dashed rgba(96, 165, 250, 0.3);
        border-radius: 10px;
        color: #60a5fa;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        text-align: center;
        display: block;
    }

    .cts-file-upload-btn-{{ section.id }}:hover {
        background: rgba(96, 165, 250, 0.15);
        border-color: rgba(96, 165, 250, 0.5);
    }

    .cts-color-grid-{{ section.id }} {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 8px;
    }

    .cts-color-option-{{ section.id }} {
        aspect-ratio: 1;
        border-radius: 8px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s;
        position: relative;
    }

    .cts-color-option-{{ section.id }}:hover {
        transform: scale(1.1);
    }

    .cts-color-option-{{ section.id }}.active {
        border-color: white;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
    }

    .cts-slider-container-{{ section.id }} {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .cts-slider-{{ section.id }} {
        flex: 1;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        outline: none;
        -webkit-appearance: none;
    }

    .cts-slider-{{ section.id }}::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        background: #60a5fa;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(96, 165, 250, 0.4);
    }

    .cts-slider-{{ section.id }}::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: #60a5fa;
        border-radius: 50%;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 8px rgba(96, 165, 250, 0.4);
    }

    .cts-slider-value-{{ section.id }} {
        font-size: 14px;
        font-weight: 600;
        color: #60a5fa;
        min-width: 45px;
        text-align: right;
    }

    .cts-primary-btn-{{ section.id }} {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #60a5fa, #a78bfa);
        border: none;
        border-radius: 12px;
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 8px 24px rgba(96, 165, 250, 0.3);
    }

    .cts-primary-btn-{{ section.id }}:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 32px rgba(96, 165, 250, 0.4);
    }

    .cts-font-selector-{{ section.id }} {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
    }

    .cts-font-option-{{ section.id }} {
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
    }

    .cts-font-option-{{ section.id }}:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .cts-font-option-{{ section.id }}.active {
        background: rgba(96, 165, 250, 0.2);
        border-color: #60a5fa;
    }

    @media (max-width: 1024px) {
        .cts-container-{{ section.id }} {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="custom-tshirt-studio-{{ section.id }}" id="custom-tshirt-studio-{{ section.id }}" style="display: none;">
    <div class="cts-header-{{ section.id }}">
        <h1>✨ Custom T-Shirt Designer</h1>
    </div>

    <div class="cts-container-{{ section.id }}">
        <div class="cts-preview-section-{{ section.id }}">
            <div class="cts-preview-card-{{ section.id }}">
                <div class="cts-mockup-stage-{{ section.id }}">
                    <div class="cts-mockup-canvas-{{ section.id }}">
                        <div class="cts-tshirt-container-{{ section.id }}">
                            <img 
                                class="cts-tshirt-image-{{ section.id }}" 
                                src="{{ 'tshirt-view.png' | asset_url }}"
                                alt="T-shirt mockup">
                            
                            <div class="cts-design-overlay-{{ section.id }}" id="designOverlay-{{ section.id }}">
                                <span class="cts-design-text-{{ section.id }}" id="designText-{{ section.id }}">YOUR DESIGN HERE</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cts-quick-actions-{{ section.id }}">
                <button class="cts-quick-action-btn-{{ section.id }}" id="downloadBtn-{{ section.id }}">📥 Download Preview</button>
                <button class="cts-quick-action-btn-{{ section.id }}" id="shareBtn-{{ section.id }}">🔗 Share Design</button>
                <button class="cts-quick-action-btn-{{ section.id }}" id="resetBtn-{{ section.id }}">🔄 Reset All</button>
            </div>
        </div>

        <div class="cts-controls-panel-{{ section.id }}">
            <div class="cts-control-card-{{ section.id }}">
                <h3>📝 Design Text</h3>
                <div class="cts-control-group-{{ section.id }}">
                    <label>Your Text</label>
                    <textarea class="cts-text-input-{{ section.id }}" id="textInput-{{ section.id }}" placeholder="Enter your custom text...">YOUR DESIGN HERE</textarea>
                </div>
                <div class="cts-control-group-{{ section.id }}">
                    <label>Font Style</label>
                    <div class="cts-font-selector-{{ section.id }}">
                        <div class="cts-font-option-{{ section.id }} active" data-font="'Bebas Neue', sans-serif" style="font-family: 'Bebas Neue', sans-serif;">Bebas</div>
                        <div class="cts-font-option-{{ section.id }}" data-font="'Inter', sans-serif" style="font-family: 'Inter', sans-serif; font-weight: 700;">Inter</div>
                        <div class="cts-font-option-{{ section.id }}" data-font="Arial, sans-serif" style="font-family: Arial, sans-serif; font-weight: bold;">Arial</div>
                    </div>
                </div>
            </div>

            <div class="cts-control-card-{{ section.id }}">
                <h3>🎨 Text Color</h3>
                <div class="cts-color-grid-{{ section.id }}">
                    <div class="cts-color-option-{{ section.id }} active" data-color="#000000" style="background: #000000;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#ffffff" style="background: #ffffff;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#ef4444" style="background: #ef4444;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#3b82f6" style="background: #3b82f6;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#22c55e" style="background: #22c55e;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#a855f7" style="background: #a855f7;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#f59e0b" style="background: #f59e0b;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#ec4899" style="background: #ec4899;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#14b8a6" style="background: #14b8a6;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#8b5cf6" style="background: #8b5cf6;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#06b6d4" style="background: #06b6d4;"></div>
                    <div class="cts-color-option-{{ section.id }}" data-color="#f97316" style="background: #f97316;"></div>
                </div>
            </div>

            <div class="cts-control-card-{{ section.id }}">
                <h3>🖼️ Upload Image</h3>
                <input type="file" class="cts-file-input-{{ section.id }}" id="imageUpload-{{ section.id }}" accept="image/*">
                <label for="imageUpload-{{ section.id }}" class="cts-file-upload-btn-{{ section.id }}">
                    📤 Choose Image File
                </label>
            </div>

            <div class="cts-control-card-{{ section.id }}">
                <h3>⚙️ Adjustments</h3>
                <div class="cts-control-group-{{ section.id }}">
                    <label>Size</label>
                    <div class="cts-slider-container-{{ section.id }}">
                        <input type="range" class="cts-slider-{{ section.id }}" id="sizeSlider-{{ section.id }}" min="50" max="200" value="100">
                        <span class="cts-slider-value-{{ section.id }}" id="sizeValue-{{ section.id }}">100%</span>
                    </div>
                </div>
                <div class="cts-control-group-{{ section.id }}">
                    <label>Rotation</label>
                    <div class="cts-slider-container-{{ section.id }}">
                        <input type="range" class="cts-slider-{{ section.id }}" id="rotateSlider-{{ section.id }}" min="-45" max="45" value="0">
                        <span class="cts-slider-value-{{ section.id }}" id="rotateValue-{{ section.id }}">0°</span>
                    </div>
                </div>
            </div>

            <button class="cts-primary-btn-{{ section.id }}" id="addToCartBtn-{{ section.id }}">🛒 Add to Cart - $24.99</button>
        </div>
    </div>
</div>

<script>
(function() {
    const sectionId = '{{ section.id }}';
    const designOverlay = document.getElementById(`designOverlay-${sectionId}`);
    const designText = document.getElementById(`designText-${sectionId}`);
    const textInput = document.getElementById(`textInput-${sectionId}`);
    const imageUpload = document.getElementById(`imageUpload-${sectionId}`);
    const sizeSlider = document.getElementById(`sizeSlider-${sectionId}`);
    const rotateSlider = document.getElementById(`rotateSlider-${sectionId}`);
    const sizeValue = document.getElementById(`sizeValue-${sectionId}`);
    const rotateValue = document.getElementById(`rotateValue-${sectionId}`);
    const resetBtn = document.getElementById(`resetBtn-${sectionId}`);

    let uploadedImage = null;
    let currentFont = "'Bebas Neue', sans-serif";
    let currentColor = '#000000';

    // Text input
    textInput.addEventListener('input', (e) => {
        if (!uploadedImage) {
            designText.textContent = e.target.value || 'YOUR DESIGN HERE';
        }
    });

    // Font selector
    document.querySelectorAll(`.cts-font-option-${sectionId}`).forEach(option => {
        option.addEventListener('click', () => {
            document.querySelectorAll(`.cts-font-option-${sectionId}`).forEach(o => o.classList.remove('active'));
            option.classList.add('active');
            currentFont = option.dataset.font;
            designText.style.fontFamily = currentFont;
        });
    });

    // Color selector
    document.querySelectorAll(`.cts-color-option-${sectionId}`).forEach(option => {
        option.addEventListener('click', () => {
            document.querySelectorAll(`.cts-color-option-${sectionId}`).forEach(o => o.classList.remove('active'));
            option.classList.add('active');
            currentColor = option.dataset.color;
            designText.style.color = currentColor;
        });
    });

    // Image upload
    imageUpload.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                if (uploadedImage) {
                    uploadedImage.remove();
                }
                
                uploadedImage = document.createElement('img');
                uploadedImage.className = `cts-design-image-${sectionId}`;
                uploadedImage.src = event.target.result;
                
                designText.style.display = 'none';
                designOverlay.appendChild(uploadedImage);
            };
            reader.readAsDataURL(file);
        }
    });

    // Size slider
    sizeSlider.addEventListener('input', (e) => {
        sizeValue.textContent = `${e.target.value}%`;
        updateTransform();
    });

    // Rotation slider
    rotateSlider.addEventListener('input', (e) => {
        rotateValue.textContent = `${e.target.value}°`;
        updateTransform();
    });

    function updateTransform() {
        const scale = sizeSlider.value / 100;
        const rotate = rotateSlider.value;
        designOverlay.style.transform = `translateX(-50%) scale(${scale}) rotate(${rotate}deg)`;
    }

    // Drag functionality
    let isDragging = false;
    let startX, startY, startLeft, startTop;

    designOverlay.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        const rect = designOverlay.getBoundingClientRect();
        const parent = designOverlay.parentElement.getBoundingClientRect();
        startLeft = ((rect.left - parent.left) / parent.width) * 100;
        startTop = ((rect.top - parent.top) / parent.height) * 100;
        designOverlay.style.cursor = 'grabbing';
    });

    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        
        const parent = designOverlay.parentElement.getBoundingClientRect();
        const deltaX = ((e.clientX - startX) / parent.width) * 100;
        const deltaY = ((e.clientY - startY) / parent.height) * 100;
        
        designOverlay.style.left = `${startLeft + deltaX}%`;
        designOverlay.style.top = `${startTop + deltaY}%`;
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
        designOverlay.style.cursor = 'move';
    });

    // Reset button
    resetBtn.addEventListener('click', () => {
        textInput.value = 'YOUR DESIGN HERE';
        designText.textContent = 'YOUR DESIGN HERE';
        designText.style.display = 'block';
        designText.style.fontFamily = "'Bebas Neue', sans-serif";
        designText.style.color = '#000000';
        
        document.querySelectorAll(`.cts-font-option-${sectionId}`).forEach(o => o.classList.remove('active'));
        document.querySelector(`.cts-font-option-${sectionId}`).classList.add('active');
        
        document.querySelectorAll(`.cts-color-option-${sectionId}`).forEach(o => o.classList.remove('active'));
        document.querySelector(`.cts-color-option-${sectionId}`).classList.add('active');
        
        sizeSlider.value = 100;
        rotateSlider.value = 0;
        sizeValue.textContent = '100%';
        rotateValue.textContent = '0°';
        designOverlay.style.left = '50%';
        designOverlay.style.top = '29%';
        
        if (uploadedImage) {
            uploadedImage.remove();
            uploadedImage = null;
        }
        
        imageUpload.value = '';
        updateTransform();
    });

    // Add to cart simulation
    document.getElementById(`addToCartBtn-${sectionId}`).addEventListener('click', () => {
        alert('🎉 Design added to cart! (This is a demo)');
    });

    // Download preview simulation
    document.getElementById(`downloadBtn-${sectionId}`).addEventListener('click', () => {
        alert('📥 Preview download feature coming soon!');
    });

    // Share design simulation
    document.getElementById(`shareBtn-${sectionId}`).addEventListener('click', () => {
        alert('🔗 Share feature coming soon!');
    });
})();
</script>

{% schema %}
{
  "name": "Custom T-Shirt Studio",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "✨ Custom T-Shirt Designer"
    }
  ],
  "presets": [
    {
      "name": "Custom T-Shirt Studio"
    }
  ]
}
{% endschema %}
