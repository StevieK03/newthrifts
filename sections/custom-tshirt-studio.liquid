{% comment %}
  Custom T-Shirt Design Studio Section
  A dedicated section for the custom t-shirt designer with amazing visuals
  Preserves all current working controls, JavaScript, and functionality
{% endcomment %}

<div class="custom-tshirt-studio" id="custom-tshirt-studio-{{ section.id }}" style="display: none;">
  <style>
    .custom-tshirt-studio {
      min-height: 100vh;
      background: #ffffff;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .studio-container {
      max-width: 1400px;
      width: 100%;
      padding: 40px 20px;
      position: relative;
      z-index: 2;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .studio-header {
      text-align: center;
      margin-bottom: 60px;
      animation: fadeInUp 1s ease-out;
    }
    
    .studio-title {
      font-size: 4rem;
      font-weight: 900;
      color: #0F172A;
      margin: 0 0 20px 0;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      background: linear-gradient(45deg, #27E1C1, #20b2aa, #27E1C1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: titleGlow 3s ease-in-out infinite alternate;
    }
    
    .studio-subtitle {
      font-size: 1.5rem;
      color: #334155;
      margin: 0 0 30px 0;
      font-weight: 300;
      letter-spacing: 1px;
    }
    
    .studio-description {
      font-size: 1.1rem;
      color: #64748b;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }
    
    /* ===== DARK MODE SUPPORT ===== */
    @media (prefers-color-scheme: dark) {
      .custom-tshirt-studio {
        background: #0F172A;
      }
      
      .studio-title {
        color: #ffffff;
        text-shadow: 0 2px 8px rgba(39, 225, 193, 0.3);
      }
      
      .studio-subtitle {
        color: #cbd5e1;
      }
      
      .studio-description {
        color: #94a3b8;
      }
      
      .design-workspace {
        background: rgba(30, 41, 59, 0.95);
        border: 1px solid rgba(39, 225, 193, 0.2);
      }
    }
    
    [data-theme="dark"] .custom-tshirt-studio {
      background: #0F172A;
    }
    
    [data-theme="dark"] .studio-title {
      color: #ffffff;
      text-shadow: 0 2px 8px rgba(39, 225, 193, 0.3);
    }
    
    [data-theme="dark"] .studio-subtitle {
      color: #cbd5e1;
    }
    
    [data-theme="dark"] .studio-description {
      color: #94a3b8;
    }
    
    [data-theme="dark"] .design-workspace {
      background: rgba(30, 41, 59, 0.95);
      border: 1px solid rgba(39, 225, 193, 0.2);
    }
    
    .design-workspace {
      background: rgba(255,255,255,0.95);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.2);
      animation: slideInUp 1s ease-out 0.3s both;
      position: relative;
      overflow: hidden;
      width: 100%;
      margin: 0 auto;
    }
    
    .workspace-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .workspace-title {
      font-size: 2rem;
      font-weight: 700;
      color: #2d3748;
      margin: 0;
    }
    
    .close-studio-btn {
      background: linear-gradient(135deg, #ff6b6b, #ee5a52);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255,107,107,0.4);
    }
    
    .close-studio-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255,107,107,0.6);
    }
    
    .floating-shapes {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }
    
    .shape {
      position: absolute;
      opacity: 0.1;
      animation: float 6s ease-in-out infinite;
    }
    
    .shape:nth-child(1) {
      top: 20%;
      left: 10%;
      width: 80px;
      height: 80px;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
      border-radius: 50%;
      animation-delay: 0s;
    }
    
    .shape:nth-child(2) {
      top: 60%;
      right: 15%;
      width: 120px;
      height: 120px;
      background: linear-gradient(45deg, #a8edea, #fed6e3);
      border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
      animation-delay: 2s;
    }
    
    .shape:nth-child(3) {
      bottom: 20%;
      left: 20%;
      width: 60px;
      height: 60px;
      background: linear-gradient(45deg, #ffecd2, #fcb69f);
      border-radius: 50%;
      animation-delay: 4s;
    }
    
    .shape:nth-child(4) {
      top: 40%;
      right: 30%;
      width: 100px;
      height: 100px;
      background: linear-gradient(45deg, #d299c2, #fef9d7);
      border-radius: 20% 80% 80% 20% / 80% 20% 80% 20%;
      animation-delay: 1s;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes titleGlow {
      from {
        filter: brightness(1) drop-shadow(0 0 10px rgba(255,255,255,0.5));
      }
      to {
        filter: brightness(1.2) drop-shadow(0 0 20px rgba(255,255,255,0.8));
      }
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateY(0px) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(180deg);
      }
    }
    
    @keyframes canvasGradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .canvas-gradient-animated {
      animation: canvasGradientShift 15s ease infinite !important;
      background-size: 300% 300% !important;
    }
    
    /* ===== ZOOM SLIDER STYLING ===== */
    /* Webkit (Chrome, Safari, Edge) slider thumb */
    .zoom-range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #ffffff;
      border: 3px solid #27e1c1;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), 0 0 0 2px rgba(39, 225, 193, 0.2);
      cursor: pointer;
      transition: all 0.15s ease;
    }
    
    .zoom-range::-webkit-slider-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(39, 225, 193, 0.5), 0 0 0 3px rgba(39, 225, 193, 0.3);
    }
    
    .zoom-range::-webkit-slider-thumb:active {
      transform: scale(1.05);
    }
    
    /* Firefox slider thumb */
    .zoom-range::-moz-range-thumb {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #ffffff;
      border: 3px solid #27e1c1;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), 0 0 0 2px rgba(39, 225, 193, 0.2);
      cursor: pointer;
      transition: all 0.15s ease;
    }
    
    .zoom-range::-moz-range-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(39, 225, 193, 0.5), 0 0 0 3px rgba(39, 225, 193, 0.3);
    }
    
    .zoom-range::-moz-range-thumb:active {
      transform: scale(1.05);
    }
    
    /* Focus state for accessibility */
    .zoom-range:focus {
      outline: none;
    }
    
    .zoom-range:focus::-webkit-slider-thumb {
      box-shadow: 0 0 0 4px rgba(39, 225, 193, 0.4);
    }
    
    .zoom-range:focus::-moz-range-thumb {
      box-shadow: 0 0 0 4px rgba(39, 225, 193, 0.4);
    }
    
    .pulse-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      height: 300px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
      }
    }
    
    @media (max-width: 768px) {
      .custom-tshirt-studio {
        overflow-x: hidden;
        max-width: 100vw;
      }
      
      .studio-title {
        font-size: 2.2rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
        line-height: 1.2;
        padding: 0 15px;
      }
      
      .studio-subtitle {
        font-size: 1.1rem;
        padding: 0 15px;
      }
      
      .studio-description {
        font-size: 1rem;
        padding: 0 15px;
      }
      
      .design-workspace {
        padding: 25px 20px;
        margin: 0 10px;
        border-radius: 20px;
        overflow-x: hidden;
        max-width: calc(100% - 20px);
        box-sizing: border-box;
      }
      
      .workspace-header {
        flex-wrap: wrap;
        gap: 15px;
      }
      
      .workspace-title {
        font-size: 1.3rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
        flex: 1 1 100%;
        text-align: center;
      }
      
      .close-studio-btn {
        flex: 0 0 auto;
        margin: 0 auto;
      }
    }

    /* ===== PRESERVE ALL OUR CURRENT BUTTON ANIMATIONS ===== */
    @keyframes upload-royal-flow {
      0% {
        background-position: 0% 50%;
        box-shadow: 0 8px 32px rgba(30, 64, 175, 0.4);
        transform: scale(1);
      }
      25% {
        background-position: 50% 0%;
        box-shadow: 0 10px 36px rgba(59, 130, 246, 0.5);
        transform: scale(1.01);
      }
      50% {
        background-position: 100% 50%;
        box-shadow: 0 12px 40px rgba(29, 78, 216, 0.6);
        transform: scale(1.02);
      }
      75% {
        background-position: 50% 100%;
        box-shadow: 0 10px 36px rgba(59, 130, 246, 0.5);
        transform: scale(1.01);
      }
      100% {
        background-position: 0% 50%;
        box-shadow: 0 8px 32px rgba(30, 64, 175, 0.4);
        transform: scale(1);
      }
    }

    @keyframes upload-royal-glow {
      0%, 100% {
        box-shadow: 0 8px 32px rgba(30, 64, 175, 0.4), 0 0 20px rgba(59, 130, 246, 0.2);
      }
      50% {
        box-shadow: 0 12px 40px rgba(30, 64, 175, 0.6), 0 0 30px rgba(59, 130, 246, 0.4);
      }
    }

    @keyframes sparkle-float {
      0%, 100% {
        transform: translateY(0px) scale(1);
        opacity: 0.8;
      }
      50% {
        transform: translateY(-8px) scale(1.2);
        opacity: 1;
      }
    }

    @keyframes submit-pulse {
      0%, 100% {
        box-shadow: 0 6px 24px rgba(255, 79, 163, 0.4);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 10px 32px rgba(255, 79, 163, 0.6);
        transform: scale(1.02);
      }
    }

    /* Message animations */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(100%);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideOut {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(100%);
      }
    }

    /* Theme-Responsive Size Chart Button */
    @media (prefers-color-scheme: light) {
      #size-chart-toggle-{{ section.id }} {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
      }
      
      #size-chart-toggle-{{ section.id }}:hover {
        background: linear-gradient(135deg, #2563eb, #1e40af) !important;
      }
    }

    @media (prefers-color-scheme: dark) {
      #size-chart-toggle-{{ section.id }} {
        background: linear-gradient(135deg, #1e40af, #1e3a8a) !important;
        box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4) !important;
      }
      
      #size-chart-toggle-{{ section.id }}:hover {
        background: linear-gradient(135deg, #1d4ed8, #1e40af) !important;
      }
    }

    /* Manual theme support */
    .light #size-chart-toggle-{{ section.id }},
    [data-theme="light"] #size-chart-toggle-{{ section.id }} {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
    }

    .dark #size-chart-toggle-{{ section.id }},
    [data-theme="dark"] #size-chart-toggle-{{ section.id }} {
      background: linear-gradient(135deg, #1e40af, #1e3a8a) !important;
      box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4) !important;
    }

    /* Dark Mode Support for Size Chart */
    @media (prefers-color-scheme: dark) {
      .size-chart-container {
        background: #1e293b !important;
        border-color: #334155 !important;
      }
      
      .size-chart-container h5 {
        color: #f1f5f9 !important;
      }
      
      .size-chart-table {
        background: #1e293b !important;
        color: #ffffff !important;
      }
      
      .size-chart-table th {
        background: linear-gradient(135deg, #1e40af, #1d4ed8) !important;
        color: white !important;
      }
      
      .size-chart-table td {
        color: #ffffff !important;
        border-color: #475569 !important;
        background: #334155 !important;
      }
      
      .size-chart-table tr:nth-child(even) td {
        background: #475569 !important;
        color: #ffffff !important;
      }
      
      .size-chart-table tr:nth-child(odd) td {
        background: #334155 !important;
        color: #ffffff !important;
      }
      
      .size-chart-table tr td:first-child {
        background: #f8fafc !important;
        color: #1e293b !important;
        font-weight: 600 !important;
      }
      
      .size-chart-container p {
        background: #fbbf24 !important;
        color: #92400e !important;
      }
    }

    /* Additional dark mode support for any dark theme */
    .dark .size-chart-container,
    [data-theme="dark"] .size-chart-container {
      background: #1e293b !important;
      border-color: #334155 !important;
    }

    .dark .size-chart-container h5,
    [data-theme="dark"] .size-chart-container h5 {
      color: #f1f5f9 !important;
    }

    .dark .size-chart-table,
    [data-theme="dark"] .size-chart-table {
      background: #1e293b !important;
      color: #ffffff !important;
    }

    .dark .size-chart-table th,
    [data-theme="dark"] .size-chart-table th {
      background: linear-gradient(135deg, #1e40af, #1d4ed8) !important;
      color: white !important;
    }

    .dark .size-chart-table td,
    [data-theme="dark"] .size-chart-table td {
      color: #ffffff !important;
      border-color: #475569 !important;
      background: #334155 !important;
    }

    .dark .size-chart-table tr:nth-child(even) td,
    [data-theme="dark"] .size-chart-table tr:nth-child(even) td {
      background: #475569 !important;
      color: #ffffff !important;
    }

    .dark .size-chart-table tr:nth-child(odd) td,
    [data-theme="dark"] .size-chart-table tr:nth-child(odd) td {
      background: #334155 !important;
      color: #ffffff !important;
    }

    .dark .size-chart-table tr td:first-child,
    [data-theme="dark"] .size-chart-table tr td:first-child {
      background: #f8fafc !important;
      color: #1e293b !important;
      font-weight: 600 !important;
    }

    /* ===== MOBILE NUDGE CONTROLS - ABOVE ZOOM BAR, FAR RIGHT ===== */
    @media (max-width: 768px) {
      #canvas-nudge-controls-{{ section.id }} {
        /* Position lower, further right, and much smaller */
        position: fixed !important;
        bottom: 60px !important; /* Closer to zoom slider */
        right: 8px !important; /* Far right edge */
        left: auto !important;
        transform: scale(0.4); /* Very compact at 40% size */
        transform-origin: bottom right;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 50 !important;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }
      
      /* Magnify on tap/press for easier mobile interaction */
      #canvas-nudge-controls-{{ section.id }}:active,
      #canvas-nudge-controls-{{ section.id }}.magnified {
        transform: scale(0.65); /* Grows to 65% when tapped */
      }
      
      /* Update button styling - darker transparent theme instead of white */
      #canvas-nudge-controls-{{ section.id }} .canvas-nudge-btn {
        min-width: 44px !important;
        min-height: 44px !important;
        background: rgba(39, 225, 193, 0.15) !important;
        border: 2px solid rgba(39, 225, 193, 0.6) !important;
      }
      
      /* Enhanced button feedback on mobile */
      #canvas-nudge-controls-{{ section.id }} .canvas-nudge-btn:active {
        transform: scale(0.92);
        background: rgba(39, 225, 193, 0.35) !important;
        border-color: rgba(39, 225, 193, 0.9) !important;
      }
      
      /* Make SVG icons teal/white for visibility */
      #canvas-nudge-controls-{{ section.id }} .canvas-nudge-btn svg {
        stroke: #27e1c1 !important;
      }
    }
    
    /* Small phones - even more compact */
    @media (max-width: 480px) {
      #canvas-nudge-controls-{{ section.id }} {
        bottom: 58px !important;
        right: 4px !important;
        transform: scale(0.35); /* Extra compact at 35% */
      }
      
      #canvas-nudge-controls-{{ section.id }}:active,
      #canvas-nudge-controls-{{ section.id }}.magnified {
        transform: scale(0.55); /* Grows to 55% when tapped */
      }
    }
    
    /* Reduce motion support */
    @media (prefers-reduced-motion: reduce) {
      #canvas-nudge-controls-{{ section.id }} {
        transition: none !important;
      }
    }

    /* ===== SCALE SLIDER STYLING (FOR EDIT MODAL) ===== */
    #scale-slider-{{ section.id }}::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #27e1c1;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    #scale-slider-{{ section.id }}::-webkit-slider-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(39, 225, 193, 0.4);
    }
    
    #scale-slider-{{ section.id }}::-moz-range-thumb {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #27e1c1;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    #scale-slider-{{ section.id }}::-moz-range-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(39, 225, 193, 0.4);
    }
  </style>
  
  <!-- Floating Background Shapes -->
  <div class="floating-shapes">
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
  </div>
  
  <!-- Pulse Ring Effect -->
  <div class="pulse-ring"></div>
  
  <div class="studio-container">
    <div class="studio-header">
      <h1 class="studio-title">🎨 Custom T-Shirt Studio</h1>
      <p class="studio-subtitle">Design Your Perfect T-Shirt</p>
      <p class="studio-description">
        Create stunning custom t-shirts with our advanced design tools. Upload your artwork, 
        customize colors, adjust positioning, and see your design come to life in real-time.
      </p>
    </div>
    
    <div class="design-workspace">
      <div class="workspace-header">
        <h2 class="workspace-title">Design Workspace</h2>
        <button class="close-studio-btn" onclick="closeCustomStudio()">
          ✕ Close Studio
        </button>
      </div>
      
      <!-- OUR CURRENT WORKING INTERACTIVE MOCKUP CONTENT -->
      <div class="custom-designer-container">
        <div id="nt-mockup-{{ section.id }}" class="nt-mockup theme-responsive-section" style="padding: 40px 0 20px 0; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);">
          <div class="container">
            
            <!-- Section Header -->
            <div class="mockup-header" style="text-align: center; margin-bottom: 30px; padding-top: 10px;">
              <h1 style="font-family: 'Bebas Neue', 'Impact', Arial Black, sans-serif; font-size: 48px; margin: 0 0 20px 0; color: #1f2937; text-shadow: 1px 1px 2px rgba(255,255,255,0.8); letter-spacing: 2px; font-weight: 700; text-transform: uppercase;">
                Custom T-Shirt Design
              </h1>
              <p style="font-size: 20px; color: #374151; margin: 0 0 25px 0; max-width: 700px; margin: 0 auto 25px auto; line-height: 1.6; text-shadow: 1px 1px 2px rgba(255,255,255,0.8);">
                Upload your design and create your own custom t-shirt! 
                <br>Drag, resize, and position your artwork perfectly on the print area.
              </p>
            </div>

            <!-- Design Customization Controls Section -->
            <div style="margin: 40px 0; max-width: 1200px; margin-left: auto; margin-right: auto;">
              <p class="canvas-hint-text" style="color: #374151; font-size: 14px; margin-top: 16px; text-align: center;">
                💡 Tip: Drag the design to move it, use scroll wheel to resize, or use the precise controls below
              </p>

              <!-- Design Customization Controls -->
              <div style="text-align: center; margin: 20px 0 16px 0;">
                <h2 class="canvas-controls-title" style="font-size: 24px; font-weight: 600; color: #1f2937; margin: 0 0 8px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">🎛️ Design Customization Controls</h2>
                <p class="canvas-controls-subtitle" style="font-size: 14px; color: #4b5563; margin: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.05);">Customize your t-shirt design with precision controls</p>
              </div>

              <div class="nt-mockup__controls" style="display: flex; flex-wrap: wrap; gap: 16px; align-items: center; justify-content: center; background: #ffffff; padding: 24px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid #e5e7eb; margin: 10px 0;">
                    
                    <!-- View Controls -->
                    <div class="nt-mockup__group">
                      <span class="nt-mockup__label" style="font-weight: 600; font-size: 14px; color: #374151; margin-right: 12px;">View</span>
                      <div class="nt-mockup__buttons" role="tablist" aria-label="Mockup view" style="display: flex; gap: 8px;">
                        <button class="nt-btn nt-btn--view is-active enhanced-view-btn" data-view="front" aria-selected="true" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, #27e1c1, #20b2aa); 
                          color: white; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.3);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          👕 Front
                        </button>
                        <button class="nt-btn nt-btn--view enhanced-view-btn" data-view="back" aria-selected="false" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); 
                          color: #374151; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          👕 Back
                        </button>
                        <button class="nt-btn nt-btn--view enhanced-view-btn" data-view="hanging" aria-selected="false" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); 
                          color: #374151; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          🏷️ Hanging
                        </button>
                        <button class="nt-btn nt-btn--view enhanced-view-btn" data-view="person1" aria-selected="false" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); 
                          color: #374151; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          👤 Model 1
                        </button>
                        <button class="nt-btn nt-btn--view enhanced-view-btn" data-view="person2" aria-selected="false" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); 
                          color: #374151; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(0,0,0,0.1);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          👤 Model 2
                        </button>
                      </div>
                    </div>

                    <!-- Color Selection -->
                    <div class="nt-mockup__group">
                      <span class="nt-mockup__label" style="font-weight: 600; font-size: 14px; color: #374151; margin-right: 12px;">T-Shirt Color</span>
                      <div class="nt-mockup__buttons" style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button class="nt-btn nt-btn--color enhanced-color-btn" data-color="white" style="
                          padding: 12px 16px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          ⚪ White
                        </button>
                        <button class="nt-btn nt-btn--color enhanced-color-btn" data-color="black" style="
                          padding: 12px 16px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          ⚫ Black
                        </button>
                      </div>
                    </div>

                    <!-- Enhanced 3D Controls -->
                    <div class="nt-mockup__group" style="background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); padding: 16px; border-radius: 16px; border: 2px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">
                      <span class="nt-mockup__label" style="font-weight: 600; font-size: 14px; color: #334155; margin-right: 12px;">🎯 3D Controls</span>
                      <div class="nt-mockup__buttons" style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button class="nt-btn nt-btn--3d enhanced-3d-btn" id="nt-3d-rotate-{{ section.id }}" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          ↺ Rotate
                        </button>
                        <button class="nt-btn nt-btn--zoom enhanced-3d-btn" id="nt-zoom-{{ section.id }}" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          🔍 Zoom
                        </button>
                        <button class="nt-btn nt-btn--validate enhanced-3d-btn" id="nt-validate-{{ section.id }}" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          ✅ Validate
                        </button>
                        <button class="nt-btn nt-btn--reset enhanced-3d-btn" id="nt-reset-{{ section.id }}" style="
                          padding: 12px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                        ">
                          🔄 Reset
                        </button>
                      </div>
                    </div>

                    <!-- Action Buttons - Organized Grid Layout -->
                    <!-- NOTE: Upload, Perfect Fit, and Submit buttons moved below canvas -->
                    <div class="nt-mockup__group">
                      
                      <!-- Action Buttons Grid -->
                      <div class="action-buttons-grid" style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 12px;
                        margin-bottom: 12px;
                      ">
                        <button class="nt-btn nt-btn--download" id="nt-download-{{ section.id }}" style="
                          padding: 14px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 8px;
                        ">
                          💾 Download Mockup
                        </button>
                        <button class="nt-btn nt-btn--edit" id="nt-edit-{{ section.id }}" style="
                          padding: 14px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 8px;
                        ">
                          ✏️ Edit Design
                        </button>
                        <button class="nt-btn nt-btn--text" id="nt-text-{{ section.id }}" style="
                          padding: 14px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, #7c3aed, #6d28d9); 
                          color: white; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(124, 58, 237, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 8px;
                        ">
                          📝 Add Text
                        </button>
                        <button class="nt-btn nt-btn--invert" id="nt-invert-{{ section.id }}" style="
                          padding: 14px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, #f59e0b, #d97706); 
                          color: white; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(245, 158, 11, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 8px;
                        ">
                          🔄 Invert Colors
                        </button>
                        <button class="nt-btn nt-btn--remove-bg" id="nt-remove-bg-{{ section.id }}" style="padding: 14px 20px; border: 2px solid transparent; background: linear-gradient(135deg, #10b981, #059669); color: white; border-radius: 16px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4); backdrop-filter: blur(10px); display: flex; align-items: center; gap: 8px;">✂️ Remove BG</button>
                      </div>
                      
                      <!-- Primary Action Buttons -->
                      <div class="primary-actions" style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 12px;
                        margin-bottom: 12px;
                      ">
                        <button class="nt-btn nt-btn--placement" id="nt-toggle-guide-{{ section.id }}" style="
                          padding: 14px 20px; 
                          border: 2px solid transparent; 
                          background: #27e1c1; 
                          color: #0f172a; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(39, 225, 193, 0.4);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 8px;
                        ">
                          📐 <span id="nt-guide-text-{{ section.id }}">Show</span> Placement Guide
                        </button>
                        <button class="nt-btn nt-btn--remove" id="nt-remove-{{ section.id }}" style="
                          padding: 14px 20px; 
                          border: 2px solid transparent; 
                          background: linear-gradient(135deg, #ef4444, #dc2626); 
                          color: white; 
                          border-radius: 16px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          cursor: pointer; 
                          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                          box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3);
                          backdrop-filter: blur(10px);
                          -webkit-backdrop-filter: blur(10px);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          gap: 8px;
                        ">
                          🗑️ Remove Design
                        </button>
                      </div>
                      
                      <!-- Perfect Fit and Submit Request buttons moved below canvas -->
                    </div>
                  </div>
                </div>
            <!-- END Design Customization Controls Section -->

            <!-- Size Chart - Collapsible -->
            <div class="size-chart-container" style="margin: 20px auto; max-width: 1200px; display: flex; flex-direction: column; align-items: center; text-align: center;">
              <button id="size-chart-toggle-{{ section.id }}" style="width: 100%; padding: 16px; background: linear-gradient(135deg, #0ea5e9, #0284c7); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; position: relative; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3); transition: all 0.3s ease;">
                <span>📏 Size Chart</span>
                <span id="size-chart-icon-{{ section.id }}" style="position: absolute; right: 16px; font-size: 18px; transition: transform 0.3s ease;">▼</span>
              </button>
              <div id="size-chart-content-{{ section.id }}" style="display: none; margin-top: 16px; padding: 16px; background: #f0f9ff; border-radius: 12px; border: 1px solid #0ea5e9; width: 100%;">
              <div style="overflow-x: auto; display: flex; justify-content: center;">
                <table class="size-chart-table" style="border-collapse: collapse; font-size: 12px; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); min-width: 600px;">
                  <thead>
                    <tr style="background: linear-gradient(135deg, #0ea5e9, #0284c7); color: white;">
                      <th style="padding: 8px; text-align: left; font-weight: 600;">Size</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">XS</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">S</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">M</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">L</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">XL</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">2XL</th>
                      <th style="padding: 8px; text-align: center; font-weight: 600;">3XL</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                      <td style="padding: 8px; font-weight: 600; background: #f9fafb;">Chest (inches)</td>
                      <td style="padding: 8px; text-align: center;">32-34</td>
                      <td style="padding: 8px; text-align: center;">35-37</td>
                      <td style="padding: 8px; text-align: center;">38-40</td>
                      <td style="padding: 8px; text-align: center;">41-43</td>
                      <td style="padding: 8px; text-align: center;">44-46</td>
                      <td style="padding: 8px; text-align: center;">47-49</td>
                      <td style="padding: 8px; text-align: center;">50-52</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                      <td style="padding: 8px; font-weight: 600; background: #f9fafb;">Length (inches)</td>
                      <td style="padding: 8px; text-align: center;">26</td>
                      <td style="padding: 8px; text-align: center;">27</td>
                      <td style="padding: 8px; text-align: center;">28</td>
                      <td style="padding: 8px; text-align: center;">29</td>
                      <td style="padding: 8px; text-align: center;">30</td>
                      <td style="padding: 8px; text-align: center;">31</td>
                      <td style="padding: 8px; text-align: center;">32</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                      <td style="padding: 8px; font-weight: 600; background: #f9fafb;">Sleeve Length</td>
                      <td style="padding: 8px; text-align: center;">8</td>
                      <td style="padding: 8px; text-align: center;">8.5</td>
                      <td style="padding: 8px; text-align: center;">9</td>
                      <td style="padding: 8px; text-align: center;">9.5</td>
                      <td style="padding: 8px; text-align: center;">10</td>
                      <td style="padding: 8px; text-align: center;">10.5</td>
                      <td style="padding: 8px; text-align: center;">11</td>
                    </tr>
                    <tr>
                      <td style="padding: 8px; font-weight: 600; background: #f9fafb;">Fit</td>
                      <td style="padding: 8px; text-align: center;">Slim</td>
                      <td style="padding: 8px; text-align: center;">Slim</td>
                      <td style="padding: 8px; text-align: center;">Regular</td>
                      <td style="padding: 8px; text-align: center;">Regular</td>
                      <td style="padding: 8px; text-align: center;">Regular</td>
                      <td style="padding: 8px; text-align: center;">Relaxed</td>
                      <td style="padding: 8px; text-align: center;">Relaxed</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div style="margin-top: 16px; padding: 12px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b; text-align: center;">
                <p style="margin: 0; color: #92400e; font-size: 14px; font-weight: 500;">
                  <strong>💡 Size Guide Tip:</strong> Measure your chest at the fullest point, keeping the tape measure parallel to the ground. If you're between sizes, we recommend sizing up for a more comfortable fit.
                </p>
              </div>
              <div style="margin-top: 12px; padding: 12px; background: #ecfdf5; border-radius: 8px; border-left: 4px solid #10b981; text-align: center;">
                <p style="margin: 0; color: #065f46; font-size: 14px;">
                  <strong>📐 How to Measure:</strong>
                </p>
                <ul style="margin: 8px 0 0 0; padding-left: 20px; color: #065f46; font-size: 13px; text-align: left; display: inline-block;">
                  <li><strong>Chest:</strong> Measure around the fullest part of your chest</li>
                  <li><strong>Length:</strong> Measure from shoulder to bottom hem</li>
                  <li><strong>Sleeve:</strong> Measure from shoulder to wrist</li>
                </ul>
              </div>
              </div>
            </div>

            <!-- Enhanced Preview Stage -->
            <div class="nt-mockup__stage" style="width: 100%; display: flex; justify-content: center; align-items: center; margin-top: 30px !important; margin-bottom: 40px !important; padding: 0; box-sizing: border-box;">
                <div class="nt-mockup__canvas canvas-gradient-animated" 
                     id="nt-mockup-canvas-{{ section.id }}"
                     style="
                       position: relative;
                       width: min(900px, 90%);
                       max-width: 90vw;
                       aspect-ratio: 1;
                       margin: 0 auto;
                       background: linear-gradient(135deg, #27e1c1 0%, #667eea 20%, #764ba2 35%, #f093fb 50%, #4facfe 65%, #27e1c1 100%);
                       background-size: 300% 300%;
                       animation: canvasGradientShift 15s ease infinite;
                       border-radius: 20px;
                       overflow: visible;
                       box-shadow: 0 25px 80px rgba(39, 225, 193, 0.3), 0 10px 30px rgba(0,0,0,0.2);
                       padding: 40px;
                       --overlay-top: 29.14%;
                       --overlay-left: 50.21%;
                       --overlay-width: 37%;
                       --overlay-height: 42%;
                       --overlay-rotate: 0deg;
                       overflow: hidden;
                       backdrop-filter: blur(10px);
                       -webkit-backdrop-filter: blur(10px);
                     ">
                    
                    <!-- T-shirt Mockup Container -->
                    <div style="position: relative; width: 100%; aspect-ratio: 1 / 1; cursor: grab;">
                  
                      <!-- Base Mockup (swapped by JS) -->
                      <img
                        id="nt-base-{{ section.id }}"
                        class="nt-mockup__base"
                        src="{{ 'tshirt-view.png' | asset_url }}"
                        alt="T-shirt mockup"
                        loading="eager"
                        decoding="async"
                        style="position: absolute; inset: 0; width: 100%; height: 100%; object-fit: contain; pointer-events: none; z-index: 100; display: block !important; opacity: 1 !important; visibility: visible !important;"
                        onerror="console.error('❌ Failed to load t-shirt image:', this.src);"
                        onload="console.log('✅ T-shirt image loaded:', this.src);"
                      >
                    
                    <!-- Debug assets (hidden) -->
                    <div id="debug-assets-{{ section.id }}" style="position: absolute; top: -100px; left: -100px; width: 1px; height: 1px; overflow: hidden;">
                      <img src="{{ 'tshirt-view.png' | asset_url }}" onload="console.log('✅ Direct asset test - tshirt-view.png loaded:', this.src);" onerror="console.error('❌ Direct asset test - tshirt-view.png failed:', this.src);">
                      <img src="{{ 'tshirt-black-v2.png' | asset_url }}" onload="console.log('✅ Direct asset test - tshirt-black-v2.png loaded:', this.src);" onerror="console.error('❌ Direct asset test - tshirt-black-v2.png failed:', this.src);">
                      <img src="{{ 'Girl-Model.png' | asset_url }}" onload="console.log('✅ Direct asset test - Girl-Model.png loaded:', this.src);" onerror="console.error('❌ Direct asset test - Girl-Model.png failed:', this.src);">
                      <img src="{{ 'Women-side.png' | asset_url }}" onload="console.log('✅ Direct asset test - Women-side.png loaded:', this.src);" onerror="console.error('❌ Direct asset test - Women-side.png failed:', this.src);">
                    </div>
                    
                    <!-- Dynamic Design Overlay - Aligned with print area -->
                    <div
                      id="nt-overlay-{{ section.id }}"
                      class="nt-mockup__overlay"
                      style="position: absolute; width: var(--overlay-width); height: var(--overlay-height); left: 50%; top: var(--overlay-top); transform: translateX(-50%) rotate(var(--overlay-rotate)); inset: auto; display: flex; align-items: center; justify-content: center; cursor: grab; transition: all 0.1s ease; border: 2px dashed rgba(39, 225, 193, 0.3); border-radius: 8px; background: rgba(39, 225, 193, 0.05); z-index: 200;"
                    >
                      <span id="nt-design-text-{{ section.id }}" 
                            style="font-family: 'Bebas Neue', sans-serif; font-size: 32px; font-weight: bold; color: #000000; text-align: center; white-space: nowrap; user-select: none; text-shadow: 1px 1px 2px rgba(255,255,255,0.8); pointer-events: none;">
                        Your Design Here
                      </span>
                      
                      <!-- Drag Handle (only visible when dragging) -->
                      <div id="nt-drag-handle-{{ section.id }}" 
                           style="position: absolute; top: -8px; right: -8px; width: 16px; height: 16px; background: #27e1c1; border: 2px solid white; border-radius: 50%; cursor: grab; display: none; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                      </div>
                      
                      <!-- Enhanced Resize Handles - All Directions (Hidden by default, shown when selected) -->
                      <!-- Top-Left -->
                      <div class="resize-handle" data-direction="nw" 
                           style="position: absolute; top: -15px; left: -15px; width: 30px; height: 30px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); border: 4px solid white; border-radius: 50%; cursor: nw-resize; display: none; box-shadow: 0 6px 20px rgba(255,107,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from top-left">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Top-Right -->
                      <div class="resize-handle" data-direction="ne" 
                           style="position: absolute; top: -15px; right: -15px; width: 30px; height: 30px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); border: 4px solid white; border-radius: 50%; cursor: ne-resize; display: none; box-shadow: 0 6px 20px rgba(255,107,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from top-right">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Bottom-Left -->
                      <div class="resize-handle" data-direction="sw" 
                           style="position: absolute; bottom: -15px; left: -15px; width: 30px; height: 30px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); border: 4px solid white; border-radius: 50%; cursor: sw-resize; display: none; box-shadow: 0 6px 20px rgba(255,107,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from bottom-left">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Bottom-Right -->
                      <div class="resize-handle" data-direction="se" 
                           style="position: absolute; bottom: -15px; right: -15px; width: 30px; height: 30px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); border: 4px solid white; border-radius: 50%; cursor: se-resize; display: none; box-shadow: 0 6px 20px rgba(255,107,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from bottom-right">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Top Edge -->
                      <div class="resize-handle" data-direction="n" 
                           style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 30px; height: 30px; background: linear-gradient(135deg, #20bf6b, #26a69a); border: 4px solid white; border-radius: 50%; cursor: n-resize; display: none; box-shadow: 0 6px 20px rgba(32,191,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from top">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Bottom Edge -->
                      <div class="resize-handle" data-direction="s" 
                           style="position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); width: 30px; height: 30px; background: linear-gradient(135deg, #20bf6b, #26a69a); border: 4px solid white; border-radius: 50%; cursor: s-resize; display: none; box-shadow: 0 6px 20px rgba(32,191,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from bottom">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Left Edge -->
                      <div class="resize-handle" data-direction="w" 
                           style="position: absolute; left: -15px; top: 50%; transform: translateY(-50%); width: 30px; height: 30px; background: linear-gradient(135deg, #20bf6b, #26a69a); border: 4px solid white; border-radius: 50%; cursor: w-resize; display: none; box-shadow: 0 6px 20px rgba(32,191,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from left">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                      
                      <!-- Right Edge -->
                      <div class="resize-handle" data-direction="e" 
                           style="position: absolute; right: -15px; top: 50%; transform: translateY(-50%); width: 30px; height: 30px; background: linear-gradient(135deg, #20bf6b, #26a69a); border: 4px solid white; border-radius: 50%; cursor: e-resize; display: none; box-shadow: 0 6px 20px rgba(32,191,107,0.4), 0 2px 8px rgba(0,0,0,0.2); z-index: 10; touch-action: none; transition: all 0.2s ease;"
                           title="Resize from right">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: white; border-radius: 50%;"></div>
                      </div>
                    </div>
                    
                    <!-- Close T-shirt Mockup Container -->
                    </div>
                    
                    <!-- Canvas Nudge Controls -->
                    <div id="canvas-nudge-controls-{{ section.id }}" style="
                      position: absolute;
                      bottom: 20px;
                      right: 20px;
                      opacity: 0;
                      pointer-events: none;
                      transition: opacity 0.3s ease;
                      z-index: 100;
                    ">
                      <div style="
                        background: rgba(15, 23, 42, 0.95);
                        border: 2px solid #27e1c1;
                        border-radius: 16px;
                        padding: 12px;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 20px rgba(39, 225, 193, 0.3);
                        backdrop-filter: blur(10px);
                        -webkit-backdrop-filter: blur(10px);
                      ">
                        <!-- Arrow Controls Grid (Label removed for cleaner preview) -->
                        <div style="
                          display: grid;
                          grid-template-columns: repeat(3, 40px);
                          grid-template-rows: repeat(3, 40px);
                          gap: 4px;
                        ">
                          <!-- Top Row -->
                          <div></div>
                          <button class="canvas-nudge-btn" data-direction="up" style="
                            background: rgba(255, 255, 255, 0.95);
                            border: 2px solid #27e1c1;
                            border-radius: 8px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                            padding: 0;
                          " onmouseover="this.style.background='#27e1c1'; this.style.transform='translateY(-2px)'" 
                             onmouseout="this.style.background='rgba(255, 255, 255, 0.95)'; this.style.transform='translateY(0)'">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                              <path d="M12 19V5m0 0l-7 7m7-7l7 7"/>
                            </svg>
                          </button>
                          <div></div>
                          
                          <!-- Middle Row -->
                          <button class="canvas-nudge-btn" data-direction="left" style="
                            background: rgba(255, 255, 255, 0.95);
                            border: 2px solid #27e1c1;
                            border-radius: 8px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                            padding: 0;
                          " onmouseover="this.style.background='#27e1c1'; this.style.transform='translateX(-2px)'" 
                             onmouseout="this.style.background='rgba(255, 255, 255, 0.95)'; this.style.transform='translateX(0)'">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                              <path d="M19 12H5m0 0l7-7m-7 7l7 7"/>
                            </svg>
                          </button>
                          <div style="
                            background: rgba(39, 225, 193, 0.1);
                            border: 2px dashed rgba(39, 225, 193, 0.3);
                            border-radius: 8px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                          ">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#27e1c1" stroke-width="2">
                              <circle cx="12" cy="12" r="1"/>
                            </svg>
                          </div>
                          <button class="canvas-nudge-btn" data-direction="right" style="
                            background: rgba(255, 255, 255, 0.95);
                            border: 2px solid #27e1c1;
                            border-radius: 8px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                            padding: 0;
                          " onmouseover="this.style.background='#27e1c1'; this.style.transform='translateX(2px)'" 
                             onmouseout="this.style.background='rgba(255, 255, 255, 0.95)'; this.style.transform='translateX(0)'">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                              <path d="M5 12h14m0 0l-7-7m7 7l-7 7"/>
                            </svg>
                          </button>
                          
                          <!-- Bottom Row -->
                          <div></div>
                          <button class="canvas-nudge-btn" data-direction="down" style="
                            background: rgba(255, 255, 255, 0.95);
                            border: 2px solid #27e1c1;
                            border-radius: 8px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                            padding: 0;
                          " onmouseover="this.style.background='#27e1c1'; this.style.transform='translateY(2px)'" 
                             onmouseout="this.style.background='rgba(255, 255, 255, 0.95)'; this.style.transform='translateY(0)'">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                              <path d="M12 5v14m0 0l7-7m-7 7l-7-7"/>
                            </svg>
                          </button>
                          <div></div>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Canvas Zoom Slider - Inside Canvas Container -->
                    <div class="zoom-bar" role="group" aria-label="Zoom controls" style="
                      position: absolute;
                      left: 50%;
                      bottom: 16px;
                      transform: translateX(-50%);
                      display: flex;
                      align-items: center;
                      gap: 10px;
                      padding: 8px 16px;
                      border-radius: 999px;
                      background: rgba(15, 23, 42, 0.85);
                      backdrop-filter: blur(8px);
                      -webkit-backdrop-filter: blur(8px);
                      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(39, 225, 193, 0.2);
                      z-index: 300;
                      transition: all 0.3s ease;
                    ">
                      <!-- Magnifying Glass Icon -->
                      <span class="zoom-icon" aria-hidden="true" style="
                        font-size: 20px;
                        line-height: 1;
                        filter: drop-shadow(0 2px 4px rgba(39, 225, 193, 0.3));
                      ">🔍</span>
                      
                      <!-- Range Slider -->
                      <input
                        id="nt-zoom-range-{{ section.id }}"
                        class="zoom-range"
                        type="range"
                        min="50"
                        max="200"
                        step="5"
                        value="100"
                        aria-label="Zoom percentage"
                        style="
                          -webkit-appearance: none;
                          appearance: none;
                          width: min(60vw, 280px);
                          height: 6px;
                          border-radius: 999px;
                          background: linear-gradient(90deg, #27e1c1, #1aa394);
                          outline: none;
                          cursor: pointer;
                          transition: opacity 0.2s;
                        "
                      />
                      
                      <!-- Zoom Percentage Label -->
                      <output 
                        id="nt-zoom-label-{{ section.id }}" 
                        class="zoom-label" 
                        for="nt-zoom-range-{{ section.id }}"
                        style="
                          min-width: 52px;
                          text-align: right;
                          font-weight: 700;
                          font-size: 14px;
                          color: #e6f9f5;
                          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
                        "
                      >100%</output>
                    </div>
                </div>
            </div>
            
            <!-- 3-Step Workflow Section - Below Canvas -->
            <div class="canvas-action-buttons workflow-steps" style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 28px;
              margin-top: 30px;
              max-width: 650px;
              margin-left: auto;
              margin-right: auto;
              padding: 0 20px;
            ">
              
              <!-- Step 1: Upload Your Design -->
              <div class="workflow-step step-1" style="
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
              ">
                <div class="step-label" style="
                  font-size: 1rem;
                  font-weight: 700;
                  color: #667eea;
                  text-transform: uppercase;
                  letter-spacing: 1.5px;
                  margin-bottom: 12px;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                ">
                  <span style="
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 800;
                    font-size: 16px;
                    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
                  ">1</span>
                  <span style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Step 1</span>
                </div>
                
                <button class="nt-btn nt-btn--upload upload-hero-btn" id="nt-upload-{{ section.id }}" style="
                  width: 100%;
                  padding: 20px 40px; 
                  border: 2px solid transparent; 
                  background: linear-gradient(135deg, #1e40af, #3b82f6, #1d4ed8, #1e40af); 
                  background-size: 300% 300%;
                  color: white; 
                  border-radius: 20px; 
                  font-size: 18px; 
                  font-weight: 700; 
                  cursor: pointer; 
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                  box-shadow: 0 8px 32px rgba(30, 64, 175, 0.4);
                  backdrop-filter: blur(10px);
                  -webkit-backdrop-filter: blur(10px);
                  position: relative;
                  overflow: hidden;
                  text-transform: uppercase;
                  letter-spacing: 1px;
                  animation: upload-royal-flow 3s ease-in-out infinite;
                  margin-bottom: 10px;
                ">
                  <span style="position: relative; z-index: 2; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    📁 Upload Your Design
                    <span class="upload-sparkle" style="
                      position: absolute;
                      width: 4px;
                      height: 4px;
                      background: rgba(255, 255, 255, 0.8);
                      border-radius: 50%;
                      animation: sparkle-float 2s ease-in-out infinite;
                    "></span>
                    <span class="upload-sparkle" style="
                      position: absolute;
                      width: 3px;
                      height: 3px;
                      background: rgba(255, 255, 255, 0.6);
                      border-radius: 50%;
                      animation: sparkle-float 2s ease-in-out infinite 0.5s;
                    "></span>
                  </span>
                </button>
                
                <p class="step-description" style="
                  font-size: 0.9rem;
                  color: #64748b;
                  line-height: 1.6;
                  margin: 0;
                  max-width: 90%;
                ">
                  Upload your custom artwork or image to preview it on the shirt.
                </p>
              </div>
              
              <!-- Step 2: Perfect Fit -->
              <div class="workflow-step step-2" style="
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
              ">
                <div class="step-label" style="
                  font-size: 1rem;
                  font-weight: 700;
                  color: #06b6d4;
                  text-transform: uppercase;
                  letter-spacing: 1.5px;
                  margin-bottom: 12px;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                ">
                  <span style="
                    background: linear-gradient(135deg, #06b6d4, #0891b2);
                    color: white;
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 800;
                    font-size: 16px;
                    box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
                  ">2</span>
                  <span style="background: linear-gradient(135deg, #06b6d4, #0891b2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Step 2</span>
                </div>
                
                <button class="nt-btn nt-btn--perfect-fit" id="nt-perfect-fit-btn-{{ section.id }}" style="
                  width: 100%;
                  padding: 18px 36px; 
                  border: 2px solid transparent; 
                  background: linear-gradient(135deg, #06b6d4, #0891b2); 
                  color: white; 
                  border-radius: 18px; 
                  font-size: 16px; 
                  font-weight: 600; 
                  cursor: pointer; 
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                  box-shadow: 0 6px 24px rgba(6, 182, 212, 0.3);
                  backdrop-filter: blur(10px);
                  -webkit-backdrop-filter: blur(10px);
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  gap: 8px;
                  margin-bottom: 10px;
                ">
                  ✨ Perfect Fit
                </button>
                
                <p class="step-description" style="
                  font-size: 0.9rem;
                  color: #64748b;
                  line-height: 1.6;
                  margin: 0;
                  max-width: 90%;
                ">
                  Adjust your design to align perfectly within the print area.
                </p>
              </div>
              
              <!-- Step 3: Submit Request -->
              <div class="workflow-step step-3" style="
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
              ">
                <div class="step-label" style="
                  font-size: 1rem;
                  font-weight: 700;
                  color: #dc2626;
                  text-transform: uppercase;
                  letter-spacing: 1.5px;
                  margin-bottom: 12px;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                ">
                  <span style="
                    background: linear-gradient(135deg, #dc2626, #ef4444);
                    color: white;
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 800;
                    font-size: 16px;
                    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
                  ">3</span>
                  <span style="background: linear-gradient(135deg, #dc2626, #ef4444); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Step 3</span>
                </div>
                
                <button class="nt-btn nt-btn--submit-request submit-request-hero-btn" id="nt-submit-request-btn-{{ section.id }}" style="
                  width: 100%;
                  padding: 20px 40px; 
                  border: 2px solid transparent; 
                  background: linear-gradient(135deg, #dc2626, #ef4444, #dc2626); 
                  background-size: 200% 200%;
                  color: white; 
                  border-radius: 20px; 
                  font-size: 18px; 
                  font-weight: 700; 
                  cursor: pointer; 
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                  box-shadow: 0 8px 32px rgba(220, 38, 38, 0.4);
                  backdrop-filter: blur(10px);
                  -webkit-backdrop-filter: blur(10px);
                  position: relative;
                  overflow: hidden;
                  text-transform: uppercase;
                  letter-spacing: 1px;
                  animation: submit-pulse 2s ease-in-out infinite;
                  margin-bottom: 10px;
                ">
                  <span style="position: relative; z-index: 2; display: flex; align-items: center; justify-content: center; gap: 8px;">
                    🚀 Submit Request
                  </span>
                  <div style="
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                    transition: left 0.5s;
                  "></div>
                </button>
                
                <p class="step-description" style="
                  font-size: 0.9rem;
                  color: #64748b;
                  line-height: 1.6;
                  margin: 0;
                  max-width: 90%;
                ">
                  Send your finalized design for review or printing.
                </p>
              </div>
              
            </div>
            
          </div>
        </div>

        <!-- Customer Information Form (Hidden by default, shown when Submit Request is clicked) -->
        <div id="nt-submit-request-{{ section.id }}" style="display: none; margin-top: 40px; padding: 24px; background: linear-gradient(135deg, rgba(220, 38, 38, 0.1), rgba(239, 68, 68, 0.1)); border-radius: 16px; border: 2px solid rgba(220, 38, 38, 0.3); max-width: 600px; margin-left: auto; margin-right: auto;">
          <h4 style="margin: 0 0 16px 0; font-size: 18px; font-weight: 700; color: #dc2626; text-align: center;">👤 Customer Information</h4>
          <p style="margin: 0 0 20px 0; font-size: 14px; color: #6b7280; text-align: center;">Please fill in your details to submit your custom t-shirt request</p>
          
          <form id="nt-request-form-{{ section.id }}" style="display: grid; gap: 12px;">
            <!-- Customer Details -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div>
                <label style="display: block; margin-bottom: 4px; font-size: 12px; font-weight: 600; color: #374151;">Full Name *</label>
                <input type="text" id="nt-customer-name-{{ section.id }}" required 
                       style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; background: white; box-sizing: border-box;">
              </div>
              <div>
                <label style="display: block; margin-bottom: 4px; font-size: 12px; font-weight: 600; color: #374151;">Email *</label>
                <input type="email" id="nt-customer-email-{{ section.id }}" required 
                       style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; background: white; box-sizing: border-box;">
              </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div>
                <label style="display: block; margin-bottom: 4px; font-size: 12px; font-weight: 600; color: #374151;">Phone Number</label>
                <input type="tel" id="nt-customer-phone-{{ section.id }}" 
                       style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; background: white; box-sizing: border-box;">
              </div>
              <div>
                <label style="display: block; margin-bottom: 4px; font-size: 12px; font-weight: 600; color: #374151;">T-Shirt Size</label>
                <select id="nt-tshirt-size-{{ section.id }}" 
                        style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; background: white; box-sizing: border-box;">
                  <option value="">Select Size</option>
                  <option value="XXS">XXS</option>
                  <option value="XS">XS</option>
                  <option value="S">S</option>
                  <option value="M">M</option>
                  <option value="L">L</option>
                  <option value="XL">XL</option>
                  <option value="XXL">XXL</option>
                </select>
              </div>
            </div>
            
            <div>
              <label style="display: block; margin-bottom: 4px; font-size: 12px; font-weight: 600; color: #374151;">Special Instructions or Message</label>
              <textarea id="nt-customer-message-{{ section.id }}" rows="3" placeholder="Any special requirements, color preferences, or additional details..."
                        style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 12px; background: white; resize: vertical; box-sizing: border-box;"></textarea>
            </div>
            
            <!-- Submit Button -->
            <div style="display: flex; gap: 8px; justify-content: flex-end;">
              <button type="button" id="nt-cancel-request-{{ section.id }}" 
                      style="padding: 8px 16px; background: #6b7280; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                Cancel
              </button>
              <button type="submit" id="nt-submit-request-form-btn-{{ section.id }}" 
                      style="padding: 8px 16px; background: #dc2626; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer; font-weight: 600;">
                🚀 Submit Request
              </button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>

  <!-- ========================================
       ADVANCED EDIT MODAL WITH 7 TABS
       ======================================== -->
  <div id="edit-modal-{{ section.id }}" class="edit-modal" style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.95);
    z-index: 10000;
    overflow-y: auto;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  ">
    <div class="edit-modal__container" style="
      max-width: 900px;
      margin: 40px auto;
      background: #ffffff;
      border-radius: 20px;
      box-shadow: 0 25px 80px rgba(39, 225, 193, 0.3);
      overflow: hidden;
    ">
      <!-- Modal Header -->
      <div class="edit-modal__header" style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px 32px;
        background: linear-gradient(135deg, #27e1c1 0%, #20b2aa 100%);
        color: #0f172a;
      ">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700;">✏️ Advanced Editor</h2>
        <button id="edit-modal-close-{{ section.id }}" style="
          background: rgba(15, 23, 42, 0.2);
          border: none;
          color: #0f172a;
          width: 36px;
          height: 36px;
          border-radius: 50%;
          cursor: pointer;
          font-size: 20px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s;
        " onmouseover="this.style.background='rgba(15, 23, 42, 0.3)'" onmouseout="this.style.background='rgba(15, 23, 42, 0.2)'">
          ✕
        </button>
      </div>

      <!-- Tab Navigation -->
      <div class="edit-tabs" style="
        display: flex;
        gap: 8px;
        padding: 16px 24px;
        background: #f8fafc;
        border-bottom: 2px solid #e2e8f0;
        overflow-x: auto;
      ">
        <button class="edit-tab active" data-tab="transform" style="
          padding: 10px 16px;
          background: #27e1c1;
          color: #0f172a;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Transform</button>
        <button class="edit-tab" data-tab="crop" style="
          padding: 10px 16px;
          background: transparent;
          color: #64748b;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Crop</button>
        <button class="edit-tab" data-tab="background" style="
          padding: 10px 16px;
          background: transparent;
          color: #64748b;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Background</button>
        <button class="edit-tab" data-tab="adjust" style="
          padding: 10px 16px;
          background: transparent;
          color: #64748b;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Adjust</button>
        <button class="edit-tab" data-tab="warp" style="
          padding: 10px 16px;
          background: transparent;
          color: #64748b;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Warp</button>
        <button class="edit-tab" data-tab="replace" style="
          padding: 10px 16px;
          background: transparent;
          color: #64748b;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Replace</button>
        <button class="edit-tab" data-tab="quality" style="
          padding: 10px 16px;
          background: transparent;
          color: #64748b;
          border: none;
          border-radius: 10px;
          font-weight: 600;
          cursor: pointer;
          white-space: nowrap;
          transition: all 0.2s;
        ">Quality</button>
      </div>

      <!-- Tab Content -->
      <div class="edit-content" style="padding: 32px;">
        
        <!-- TRANSFORM TAB -->
        <div id="tab-transform-{{ section.id }}" class="edit-tab-content" style="display: block;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Transform Controls</h3>
          
          <!-- LIVE PREVIEW -->
          <div style="
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 2px solid #27e1c1;
          ">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
              <h4 style="margin: 0; font-size: 14px; font-weight: 600; color: #334155;">Live Preview</h4>
              
              <!-- Preview Zoom Controls -->
              <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 12px; color: #64748b;">Zoom:</span>
                <input 
                  type="range" 
                  id="preview-zoom-range-{{ section.id }}" 
                  min="50" 
                  max="150" 
                  value="100" 
                  step="10"
                  style="width: 80px; height: 4px; cursor: pointer;"
                />
                <output id="preview-zoom-label-{{ section.id }}" style="min-width: 40px; text-align: right; font-size: 12px; font-weight: 600; color: #27e1c1;">100%</output>
              </div>
            </div>
            
            <div id="edit-preview-{{ section.id }}" style="
              background: white;
              border-radius: 12px;
              min-height: 800px;
              max-height: 1200px;
              display: flex;
              align-items: center;
              justify-content: center;
              position: relative;
              overflow: auto;
              padding: 40px;
            ">
              <!-- Preview will be cloned here -->
              <p style="color: #94a3b8; text-align: center;">Loading preview...</p>
            </div>
          </div>
          
          <div style="display: grid; gap: 20px;">
            <!-- Scale with Synced Slider -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Scale (%)</label>
              <input type="number" id="scale-input-{{ section.id }}" min="1" max="500" value="100" style="
                width: 100%;
                padding: 12px;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                font-size: 14px;
                margin-bottom: 12px;
              ">
              
              <!-- Scale Slider (Synced) -->
              <div style="
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 12px 16px;
                background: rgba(15, 23, 42, 0.05);
                border-radius: 10px;
                border: 1px solid rgba(39, 225, 193, 0.2);
              ">
                <span style="font-size: 20px;">🔍</span>
                <input type="range" id="scale-slider-{{ section.id }}" min="1" max="500" value="100" style="
                  flex: 1;
                  height: 6px;
                  border-radius: 999px;
                  background: linear-gradient(90deg, #27e1c1, #1aa394);
                  outline: none;
                  -webkit-appearance: none;
                  appearance: none;
                ">
                <output id="scale-output-{{ section.id }}" style="
                  min-width: 52px;
                  text-align: right;
                  font-weight: 600;
                  color: #0f172a;
                  font-size: 14px;
                ">100%</output>
              </div>
            </div>

            <!-- Rotation -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Rotation (°)</label>
              <input type="number" id="rotation-input-{{ section.id }}" min="-180" max="180" value="0" style="
                width: 100%;
                padding: 12px;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                font-size: 14px;
              ">
            </div>

            <!-- Flip & Position -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <button id="flip-h-btn-{{ section.id }}" style="
                padding: 12px;
                background: #f8fafc;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s;
              " onmouseover="this.style.background='#27e1c1'; this.style.borderColor='#27e1c1'" 
                 onmouseout="this.style.background='#f8fafc'; this.style.borderColor='#e2e8f0'">
                ↔ Flip H
              </button>
              <button id="flip-v-btn-{{ section.id }}" style="
                padding: 12px;
                background: #f8fafc;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s;
              " onmouseover="this.style.background='#27e1c1'; this.style.borderColor='#27e1c1'" 
                 onmouseout="this.style.background='#f8fafc'; this.style.borderColor='#e2e8f0'">
                ↕ Flip V
              </button>
            </div>

            <!-- Styled Nudge Controls (Same as Main Canvas) -->
            <div>
              <label style="display: block; margin-bottom: 12px; font-weight: 600; color: #334155;">Nudge (Arrow Keys)</label>
              <div style="
                display: flex;
                justify-content: center;
                padding: 16px;
                background: rgba(15, 23, 42, 0.03);
                border-radius: 12px;
              ">
                <div style="
                  background: rgba(15, 23, 42, 0.95);
                  border: 2px solid #27e1c1;
                  border-radius: 16px;
                  padding: 12px;
                  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 20px rgba(39, 225, 193, 0.3);
                  backdrop-filter: blur(10px);
                  -webkit-backdrop-filter: blur(10px);
                ">
                  <!-- Nudge controls (label removed for cleaner UI) -->
                  <div style="
                    display: grid;
                    grid-template-columns: repeat(3, 40px);
                    grid-template-rows: repeat(3, 40px);
                    gap: 4px;
                  ">
                    <!-- Top Row -->
                    <div></div>
                    <button id="nudge-up-{{ section.id }}" style="
                      background: rgba(39, 225, 193, 0.15);
                      border: 2px solid rgba(39, 225, 193, 0.6);
                      border-radius: 8px;
                      cursor: pointer;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      transition: all 0.2s ease;
                      padding: 0;
                    " onmouseover="this.style.background='rgba(39, 225, 193, 0.35)'; this.style.transform='translateY(-2px)'" 
                       onmouseout="this.style.background='rgba(39, 225, 193, 0.15)'; this.style.transform='translateY(0)'">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#27e1c1" stroke-width="3">
                        <path d="M12 19V5m0 0l-7 7m7-7l7 7"/>
                      </svg>
                    </button>
                    <div></div>
                    
                    <!-- Middle Row -->
                    <button id="nudge-left-{{ section.id }}" style="
                      background: rgba(39, 225, 193, 0.15);
                      border: 2px solid rgba(39, 225, 193, 0.6);
                      border-radius: 8px;
                      cursor: pointer;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      transition: all 0.2s ease;
                      padding: 0;
                    " onmouseover="this.style.background='rgba(39, 225, 193, 0.35)'; this.style.transform='translateX(-2px)'" 
                       onmouseout="this.style.background='rgba(39, 225, 193, 0.15)'; this.style.transform='translateX(0)'">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#27e1c1" stroke-width="3">
                        <path d="M19 12H5m0 0l7-7m-7 7l7 7"/>
                      </svg>
                    </button>
                    <div style="
                      background: rgba(39, 225, 193, 0.1);
                      border: 2px dashed rgba(39, 225, 193, 0.3);
                      border-radius: 8px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    ">
                      <div style="width: 8px; height: 8px; border-radius: 50%; background: rgba(39, 225, 193, 0.6);"></div>
                    </div>
                    <button id="nudge-right-{{ section.id }}" style="
                      background: rgba(39, 225, 193, 0.15);
                      border: 2px solid rgba(39, 225, 193, 0.6);
                      border-radius: 8px;
                      cursor: pointer;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      transition: all 0.2s ease;
                      padding: 0;
                    " onmouseover="this.style.background='rgba(39, 225, 193, 0.35)'; this.style.transform='translateX(2px)'" 
                       onmouseout="this.style.background='rgba(39, 225, 193, 0.15)'; this.style.transform='translateX(0)'">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#27e1c1" stroke-width="3">
                        <path d="M5 12h14m0 0l-7-7m7 7l-7 7"/>
                      </svg>
                    </button>
                    
                    <!-- Bottom Row -->
                    <div></div>
                    <button id="nudge-down-{{ section.id }}" style="
                      background: rgba(39, 225, 193, 0.15);
                      border: 2px solid rgba(39, 225, 193, 0.6);
                      border-radius: 8px;
                      cursor: pointer;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      transition: all 0.2s ease;
                      padding: 0;
                    " onmouseover="this.style.background='rgba(39, 225, 193, 0.35)'; this.style.transform='translateY(2px)'" 
                       onmouseout="this.style.background='rgba(39, 225, 193, 0.15)'; this.style.transform='translateY(0)'">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#27e1c1" stroke-width="3">
                        <path d="M12 5v14m0 0l7-7m-7 7l-7-7"/>
                      </svg>
                    </button>
                    <div></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Quick Actions -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <button id="center-btn-{{ section.id }}" style="
                padding: 14px;
                background: #27e1c1;
                color: #0f172a;
                border: none;
                border-radius: 12px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.2s;
              " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                ⊙ Center
              </button>
              <button id="autofit-btn-{{ section.id }}" style="
                padding: 14px;
                background: #27e1c1;
                color: #0f172a;
                border: none;
                border-radius: 12px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.2s;
              " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                ⚡ Auto-Fit
              </button>
            </div>
          </div>
        </div>

        <!-- CROP TAB -->
        <div id="tab-crop-{{ section.id }}" class="edit-tab-content" style="display: none;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Crop Tool</h3>
          <p style="color: #64748b; margin-bottom: 20px;">Click "Start Crop" to begin. Adjust the box, then click "Apply" to commit.</p>
          
          <div style="display: flex; gap: 12px;">
            <button id="crop-init-btn-{{ section.id }}" style="
              flex: 1;
              padding: 14px;
              background: #27e1c1;
              color: #0f172a;
              border: none;
              border-radius: 12px;
              font-weight: 700;
              cursor: pointer;
            ">✂️ Start Crop</button>
            <button id="crop-apply-btn-{{ section.id }}" style="
              flex: 1;
              padding: 14px;
              background: #10b981;
              color: white;
              border: none;
              border-radius: 12px;
              font-weight: 700;
              cursor: pointer;
              opacity: 0.5;
            " disabled>✓ Apply</button>
            <button id="crop-cancel-btn-{{ section.id }}" style="
              flex: 1;
              padding: 14px;
              background: #ef4444;
              color: white;
              border: none;
              border-radius: 12px;
              font-weight: 700;
              cursor: pointer;
              opacity: 0.5;
            " disabled>✕ Cancel</button>
          </div>
        </div>

        <!-- BACKGROUND TAB -->
        <div id="tab-background-{{ section.id }}" class="edit-tab-content" style="display: none;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Background Removal</h3>
          
          <div style="display: grid; gap: 20px;">
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Target Color</label>
              <input type="color" id="bg-color-{{ section.id }}" value="#ffffff" style="
                width: 100%;
                height: 50px;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                cursor: pointer;
              ">
            </div>

            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Tolerance: <span id="tolerance-value-{{ section.id }}">30</span></label>
              <input type="range" id="bg-tolerance-{{ section.id }}" min="0" max="100" value="30" style="
                width: 100%;
              ">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <button id="remove-bg-btn-{{ section.id }}" style="
                padding: 14px;
                background: #27e1c1;
                color: #0f172a;
                border: none;
                border-radius: 12px;
                font-weight: 700;
                cursor: pointer;
              ">🎨 Remove BG</button>
              <button id="revert-bg-btn-{{ section.id }}" style="
                padding: 14px;
                background: #f59e0b;
                color: white;
                border: none;
                border-radius: 12px;
                font-weight: 700;
                cursor: pointer;
              ">↶ Revert BG</button>
            </div>
          </div>
        </div>

        <!-- ADJUST TAB -->
        <div id="tab-adjust-{{ section.id }}" class="edit-tab-content" style="display: none;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Image Adjustments</h3>
          
          <div style="display: grid; gap: 20px;">
            <!-- Opacity -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Opacity: <span id="opacity-value-{{ section.id }}">100</span>%</label>
              <input type="range" id="opacity-slider-{{ section.id }}" min="0" max="100" value="100" style="width: 100%;">
            </div>

            <!-- Brightness -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Brightness: <span id="brightness-value-{{ section.id }}">0</span></label>
              <input type="range" id="brightness-slider-{{ section.id }}" min="-1" max="1" step="0.1" value="0" style="width: 100%;">
            </div>

            <!-- Contrast -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Contrast: <span id="contrast-value-{{ section.id }}">0</span></label>
              <input type="range" id="contrast-slider-{{ section.id }}" min="-1" max="1" step="0.1" value="0" style="width: 100%;">
            </div>

            <!-- Grayscale -->
            <div>
              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
                <input type="checkbox" id="grayscale-check-{{ section.id }}" style="width: 20px; height: 20px; cursor: pointer;">
                <span style="font-weight: 600; color: #334155;">Grayscale</span>
              </label>
            </div>

            <!-- Outline -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155;">Outline Width: <span id="outline-value-{{ section.id }}">0</span>px</label>
              <input type="range" id="outline-slider-{{ section.id }}" min="0" max="20" value="0" style="width: 100%;">
            </div>
          </div>
        </div>

        <!-- WARP TAB -->
        <div id="tab-warp-{{ section.id }}" class="edit-tab-content" style="display: none;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Perspective Warp</h3>
          <p style="color: #64748b; margin-bottom: 20px;">🚧 Advanced perspective warping coming soon! This will allow 4-corner distortion for creative effects.</p>
          
          <button style="
            padding: 14px;
            background: #94a3b8;
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: not-allowed;
            width: 100%;
          " disabled>🔧 Enable Warp (Coming Soon)</button>
        </div>

        <!-- REPLACE TAB -->
        <div id="tab-replace-{{ section.id }}" class="edit-tab-content" style="display: none;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Replace Design</h3>
          <p style="color: #64748b; margin-bottom: 20px;">Upload a new image while preserving position, scale, and rotation.</p>
          
          <div style="
            border: 3px dashed #e2e8f0;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
          " id="replace-dropzone-{{ section.id }}"
             onmouseover="this.style.borderColor='#27e1c1'; this.style.background='#f0fdfa'" 
             onmouseout="this.style.borderColor='#e2e8f0'; this.style.background='transparent'">
            <div style="font-size: 48px; margin-bottom: 12px;">📁</div>
            <p style="margin: 0; font-weight: 600; color: #334155;">Click or drag to replace design</p>
            <input type="file" id="replace-input-{{ section.id }}" accept="image/*" style="display: none;">
          </div>
        </div>

        <!-- QUALITY TAB -->
        <div id="tab-quality-{{ section.id }}" class="edit-tab-content" style="display: none;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #0f172a;">Print Quality Analysis</h3>
          
          <div style="
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
          ">
            <div style="font-size: 64px; font-weight: 900; margin-bottom: 12px;" id="dpi-display-{{ section.id }}">
              <span id="dpi-number-{{ section.id }}" style="color: #27e1c1;">300</span>
              <span style="font-size: 24px; color: #64748b;">DPI</span>
            </div>
            
            <div style="
              padding: 12px 24px;
              background: #27e1c1;
              color: #0f172a;
              border-radius: 12px;
              font-weight: 700;
              display: inline-block;
              margin-bottom: 16px;
            " id="quality-badge-{{ section.id }}">
              ✓ EXCELLENT QUALITY
            </div>

            <p style="color: #64748b; margin: 0; font-size: 14px;">
              <strong>Tip:</strong> Aim for ≥300 DPI for best print results
            </p>
          </div>

          <div style="
            margin-top: 20px;
            padding: 16px;
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            border-radius: 8px;
          " id="quality-warning-{{ section.id }}" style="display: none;">
            <strong>⚠️ Warning:</strong> Your design may appear pixelated when printed. Consider uploading a higher resolution image.
          </div>
        </div>

      </div>

      <!-- Modal Footer -->
      <div class="edit-modal__footer" style="
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        padding: 24px 32px;
        background: #f8fafc;
        border-top: 2px solid #e2e8f0;
      ">
        <button id="edit-done-btn-{{ section.id }}" style="
          padding: 14px 32px;
          background: #27e1c1;
          color: #0f172a;
          border: none;
          border-radius: 12px;
          font-weight: 700;
          font-size: 16px;
          cursor: pointer;
          transition: all 0.2s;
        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(39, 225, 193, 0.4)'" 
           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
          ✓ Done Editing
        </button>
      </div>
    </div>
  </div>

  <!-- ========================================
       TEXT DESIGN PANEL
       ======================================== -->
  <div id="text-panel-{{ section.id }}" class="nt-text-panel" style="
    display: none;
    position: fixed;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    width: 360px;
    max-height: 85vh;
    z-index: 9999;
  ">
    <div class="nt-text-panel__header">
      <h2 class="nt-text-panel__title">📝 Text Tool</h2>
      <button class="nt-text-panel__close" id="text-panel-close-{{ section.id }}" aria-label="Close text panel">✕</button>
    </div>

    <!-- Add Text Button -->
    <div class="nt-text-section">
      <button class="nt-text-add-btn" id="text-add-btn-{{ section.id }}">
        ➕ Add New Text
      </button>
    </div>

    <!-- Text Layers List -->
    <div class="nt-text-section">
      <div class="nt-text-section__title">Layers</div>
      <div class="nt-text-layers" id="text-layers-{{ section.id }}">
        <!-- Layers will be dynamically added here -->
        <div style="text-align: center; padding: 20px; color: #94a3b8; font-size: 14px;">
          No text objects yet.<br>Click "Add New Text" to start!
        </div>
      </div>
    </div>

    <!-- Text Content -->
    <div class="nt-text-section" id="text-content-section-{{ section.id }}" style="display: none;">
      <div class="nt-text-section__title">Content</div>
      <div class="nt-text-section__content">
        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-content-{{ section.id }}">Text</label>
          <textarea 
            class="nt-text-control__textarea" 
            id="text-content-{{ section.id }}" 
            placeholder="Enter your text here..."
          ></textarea>
        </div>
      </div>
    </div>

    <!-- Font & Style -->
    <div class="nt-text-section" id="text-font-section-{{ section.id }}" style="display: none;">
      <div class="nt-text-section__title">Font & Style</div>
      <div class="nt-text-section__content">
        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-font-{{ section.id }}">Font Family</label>
          <select class="nt-text-control__select" id="text-font-{{ section.id }}">
            <option value="Inter">Inter (Modern & Clean)</option>
            <option value="Roboto">Roboto (Professional)</option>
            <option value="Montserrat">Montserrat (Geometric & Bold)</option>
            <option value="Poppins">Poppins (Friendly & Round)</option>
            <option value="Oswald">Oswald (Condensed & Strong)</option>
            <option value="Playfair Display">Playfair Display (Elegant & Classic)</option>
            <option value="Bebas Neue">Bebas Neue (BOLD HEADLINES)</option>
            <option value="Pacifico">Pacifico (Casual Script)</option>
            <option value="Satisfy">Satisfy (Handwritten)</option>
            <option value="Anton">Anton (IMPACT STYLE)</option>
            <option value="Permanent Marker">Permanent Marker (Marker Style)</option>
            <option value="Raleway">Raleway (Thin & Elegant)</option>
          </select>
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-size-{{ section.id }}">Size (px)</label>
          <input 
            type="number" 
            class="nt-text-control__input" 
            id="text-size-{{ section.id }}" 
            min="12" 
            max="200" 
            value="48"
          >
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label">Color</label>
          <div class="nt-text-color-picker">
            <input 
              type="color" 
              class="nt-text-color-picker__swatch" 
              id="text-color-{{ section.id }}" 
              value="#000000"
            >
            <input 
              type="text" 
              class="nt-text-color-picker__input nt-text-control__input" 
              id="text-color-hex-{{ section.id }}" 
              value="#000000"
              placeholder="#000000"
            >
          </div>
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-tracking-{{ section.id }}">Letter Spacing (px)</label>
          <input 
            type="range" 
            class="nt-text-control__range" 
            id="text-tracking-{{ section.id }}" 
            min="-10" 
            max="50" 
            value="0"
            step="0.5"
          >
          <output id="text-tracking-output-{{ section.id }}">0px</output>
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-leading-{{ section.id }}">Line Height</label>
          <input 
            type="range" 
            class="nt-text-control__range" 
            id="text-leading-{{ section.id }}" 
            min="0.8" 
            max="3" 
            value="1.2"
            step="0.1"
          >
          <output id="text-leading-output-{{ section.id }}">1.2</output>
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label">Text Alignment</label>
          <div class="nt-text-btn-group">
            <button class="nt-text-btn" data-align="left">Left</button>
            <button class="nt-text-btn active" data-align="center">Center</button>
            <button class="nt-text-btn" data-align="right">Right</button>
          </div>
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label">Text Case</label>
          <div class="nt-text-btn-group">
            <button class="nt-text-btn active" data-case="normal">Normal</button>
            <button class="nt-text-btn" data-case="upper">UPPER</button>
            <button class="nt-text-btn" data-case="lower">lower</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Effects -->
    <div class="nt-text-section" id="text-effects-section-{{ section.id }}" style="display: none;">
      <div class="nt-text-section__title">Effects</div>
      <div class="nt-text-section__content">
        <div class="nt-text-toggle">
          <label class="nt-text-toggle__label">Outline/Stroke</label>
          <label class="nt-text-toggle__switch">
            <input type="checkbox" class="nt-text-toggle__checkbox" id="text-outline-toggle-{{ section.id }}">
            <span class="nt-text-toggle__slider"></span>
          </label>
        </div>
        <div id="text-outline-controls-{{ section.id }}" style="display: none; padding-left: 16px;">
          <div class="nt-text-control">
            <label class="nt-text-control__label">Outline Color</label>
            <input type="color" class="nt-text-color-picker__swatch" id="text-outline-color-{{ section.id }}" value="#ffffff">
          </div>
          <div class="nt-text-control">
            <label class="nt-text-control__label">Outline Width (px)</label>
            <input type="range" class="nt-text-control__range" id="text-outline-width-{{ section.id }}" min="1" max="20" value="3" step="0.5">
            <output id="text-outline-width-output-{{ section.id }}">3px</output>
          </div>
        </div>

        <div class="nt-text-toggle">
          <label class="nt-text-toggle__label">Shadow</label>
          <label class="nt-text-toggle__switch">
            <input type="checkbox" class="nt-text-toggle__checkbox" id="text-shadow-toggle-{{ section.id }}">
            <span class="nt-text-toggle__slider"></span>
          </label>
        </div>
        <div id="text-shadow-controls-{{ section.id }}" style="display: none; padding-left: 16px;">
          <div class="nt-text-control">
            <label class="nt-text-control__label">Shadow X Offset (px)</label>
            <input type="range" class="nt-text-control__range" id="text-shadow-x-{{ section.id }}" min="-20" max="20" value="2" step="1">
            <output id="text-shadow-x-output-{{ section.id }}">2px</output>
          </div>
          <div class="nt-text-control">
            <label class="nt-text-control__label">Shadow Y Offset (px)</label>
            <input type="range" class="nt-text-control__range" id="text-shadow-y-{{ section.id }}" min="-20" max="20" value="2" step="1">
            <output id="text-shadow-y-output-{{ section.id }}">2px</output>
          </div>
          <div class="nt-text-control">
            <label class="nt-text-control__label">Shadow Blur (px)</label>
            <input type="range" class="nt-text-control__range" id="text-shadow-blur-{{ section.id }}" min="0" max="20" value="4" step="1">
            <output id="text-shadow-blur-output-{{ section.id }}">4px</output>
          </div>
        </div>

        <div class="nt-text-toggle">
          <label class="nt-text-toggle__label">Curved Text</label>
          <label class="nt-text-toggle__switch">
            <input type="checkbox" class="nt-text-toggle__checkbox" id="text-curve-toggle-{{ section.id }}">
            <span class="nt-text-toggle__slider"></span>
          </label>
        </div>
        <div id="text-curve-controls-{{ section.id }}" style="display: none; padding-left: 16px;">
          <div class="nt-text-control">
            <label class="nt-text-control__label">Arc Radius (px)</label>
            <input type="range" class="nt-text-control__range" id="text-curve-radius-{{ section.id }}" min="50" max="300" value="100" step="10">
            <output id="text-curve-radius-output-{{ section.id }}">100px</output>
          </div>
          <div class="nt-text-toggle">
            <label class="nt-text-toggle__label">Invert Arc</label>
            <label class="nt-text-toggle__switch">
              <input type="checkbox" class="nt-text-toggle__checkbox" id="text-curve-invert-{{ section.id }}">
              <span class="nt-text-toggle__slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Transform -->
    <div class="nt-text-section" id="text-transform-section-{{ section.id }}" style="display: none;">
      <div class="nt-text-section__title">Transform</div>
      <div class="nt-text-section__content">
        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-rotate-{{ section.id }}">Rotation (degrees)</label>
          <input 
            type="range" 
            class="nt-text-control__range" 
            id="text-rotate-{{ section.id }}" 
            min="-180" 
            max="180" 
            value="0"
            step="1"
          >
          <output id="text-rotate-output-{{ section.id }}">0°</output>
        </div>

        <div class="nt-text-control">
          <label class="nt-text-control__label" for="text-scale-{{ section.id }}">Scale</label>
          <input 
            type="range" 
            class="nt-text-control__range" 
            id="text-scale-{{ section.id }}" 
            min="0.5" 
            max="2" 
            value="1"
            step="0.05"
          >
          <output id="text-scale-output-{{ section.id }}">1.0</output>
        </div>

        <div class="nt-text-btn-group">
          <button class="nt-text-btn" id="text-center-btn-{{ section.id }}">📍 Center</button>
          <button class="nt-text-btn" id="text-reset-btn-{{ section.id }}">↺ Reset</button>
        </div>
      </div>
    </div>

    <!-- Export -->
    <div class="nt-text-section" id="text-export-section-{{ section.id }}" style="display: none;">
      <div class="nt-text-section__title">Export</div>
      <div class="nt-text-section__content">
        <div class="nt-text-btn-group">
          <button class="nt-text-btn" id="text-export-svg-{{ section.id }}">SVG</button>
          <button class="nt-text-btn" id="text-export-png-{{ section.id }}">PNG</button>
          <button class="nt-text-btn" id="text-export-json-{{ section.id }}">JSON</button>
        </div>
      </div>
    </div>

  </div>

</div>

<!-- Load Studio Edit Operations -->
<script src="{{ 'studio-edit.js' | asset_url }}" defer></script>

<!-- Load Text Engine System -->
<link rel="stylesheet" href="{{ 'text-engine.css' | asset_url }}">
<script src="{{ 'text-engine.js' | asset_url }}" defer></script>
<script src="{{ 'text-engine-init.js' | asset_url }}" defer></script>

<script src="{{ 'background-remover.js' | asset_url }}" defer></script>

<script src="{{ 'custom-tshirt-studio.js' | asset_url }}" defer></script>

<style>
/* ========================================
   MOBILE RESPONSIVE DESIGN WORKSPACE
   ======================================== */

/* Tablet & Medium Screens (768px and below) */
@media (max-width: 768px) {
  /* Main Studio Container */
  .custom-tshirt-studio {
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
  
  /* ===== CANVAS ZOOM SLIDER - MOBILE ===== */
  .zoom-bar {
    bottom: 12px !important;
    gap: 8px !important;
    padding: 6px 12px !important;
  }
  
  .zoom-icon {
    font-size: 18px !important;
  }
  
  .zoom-range {
    width: min(65vw, 220px) !important;
    height: 5px !important;
  }
  
  .zoom-range::-webkit-slider-thumb {
    width: 20px !important;
    height: 20px !important;
    border-width: 2px !important;
  }
  
  .zoom-range::-moz-range-thumb {
    width: 20px !important;
    height: 20px !important;
    border-width: 2px !important;
  }
  
  .zoom-label {
    min-width: 48px !important;
    font-size: 13px !important;
  }
  /* ===== END ZOOM SLIDER ===== */
  
  /* Studio Header */
  .studio-title {
    font-size: 2.25rem !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    line-height: 1.2 !important;
    padding: 0 15px !important;
  }
  
  .studio-subtitle {
    font-size: 1rem !important;
    padding: 0 15px !important;
  }
  
  .studio-description {
    font-size: 0.95rem !important;
    padding: 0 15px !important;
  }
  
  /* Design Workspace */
  .design-workspace {
    padding: 20px 12px !important;
    margin: 0 10px !important;
    border-radius: 16px !important;
    overflow-x: hidden !important;
    max-width: calc(100% - 20px) !important;
    box-sizing: border-box !important;
  }
  
  .workspace-header {
    flex-wrap: wrap !important;
    gap: 15px !important;
  }
  
  .workspace-title {
    font-size: 1.5rem !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    flex: 1 1 100% !important;
    text-align: center !important;
  }
  
  .close-studio-btn {
    flex: 0 0 auto !important;
    margin: 0 auto !important;
  }
  
  /* Mockup Section */
  #nt-mockup-{{ section.id }} {
    padding: 30px 0 15px 0 !important;
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
  
  .container {
    padding: 0 12px !important;
    max-width: 100% !important;
  }
  
  /* Mockup Header */
  .mockup-header {
    margin-bottom: 20px !important;
  }
  
  .mockup-header h1 {
    font-size: 2rem !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    padding: 0 15px !important;
    line-height: 1.2 !important;
    margin-bottom: 15px !important;
  }
  
  .mockup-header p {
    font-size: 1rem !important;
    padding: 0 15px !important;
    line-height: 1.6 !important;
  }
  
  /* Canvas Hint Text */
  .canvas-hint-text {
    font-size: 0.85rem !important;
    padding: 0 12px !important;
  }
  
  /* Controls Title */
  .canvas-controls-title {
    font-size: 1.5rem !important;
    padding: 0 12px !important;
  }
  
  .canvas-controls-subtitle {
    font-size: 0.85rem !important;
    padding: 0 12px !important;
  }
  
  /* Design Customization Controls Container */
  .nt-mockup__controls {
    flex-direction: column !important;
    padding: 16px 12px !important;
    gap: 16px !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }
  
  /* Control Groups */
  .nt-mockup__group {
    width: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
  }
  
  .nt-mockup__label {
    display: block !important;
    text-align: center !important;
    margin: 0 0 8px 0 !important;
    font-size: 0.9rem !important;
  }
  
  /* Button Containers - Grid Layout for Better Organization */
  .nt-mockup__buttons {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 8px !important;
    width: 100% !important;
  }
  
  /* View Buttons - 2 columns on tablet */
  .nt-mockup__group:has(.nt-btn--view) .nt-mockup__buttons {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  /* Color Buttons - 2 columns */
  .nt-mockup__group:has(.nt-btn--color) .nt-mockup__buttons {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  /* 3D Controls - 2 columns */
  .nt-mockup__group:has(.nt-btn--3d) .nt-mockup__buttons {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  /* Zoom Controls - Full width stack */
  .nt-mockup__group:has(.nt-btn--zoom-out) .nt-mockup__buttons {
    grid-template-columns: 1fr !important;
  }
  
  /* All Buttons - Mobile Optimized */
  .nt-btn {
    padding: 12px 16px !important;
    font-size: 0.85rem !important;
    border-radius: 12px !important;
    width: 100% !important;
    box-sizing: border-box !important;
    white-space: nowrap !important;
    text-align: center !important;
    justify-content: center !important;
  }
  
  /* Upload Section */
  .upload-section {
    width: 100% !important;
    margin-bottom: 16px !important;
  }
  
  .nt-btn--upload {
    width: 100% !important;
    padding: 16px 24px !important;
    font-size: 0.95rem !important;
    border-radius: 16px !important;
  }
  
  /* Action Buttons Grid */
  .action-buttons-grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 10px !important;
    width: 100% !important;
  }
  
  /* Primary Actions */
  .primary-actions {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 10px !important;
    width: 100% !important;
  }
  
  /* Submit Request Button */
  .submit-request-btn {
    width: 100% !important;
    padding: 16px 24px !important;
    font-size: 0.95rem !important;
    border-radius: 16px !important;
  }
  
  /* Canvas Container */
  .nt-mockup__canvas {
    max-width: 100% !important;
    width: min(95vw, 600px) !important;
    margin: 15px auto 25px auto !important;
    padding: 0 10px !important;
    box-sizing: border-box !important;
  }
  
  /* Canvas Stage */
  .nt-mockup__stage {
    margin-top: 20px !important;
    margin-bottom: 25px !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 0 !important;
  }
  
  /* 3-Step Workflow - Below Canvas */
  .workflow-steps {
    margin-top: 25px !important;
    max-width: 100% !important;
    padding: 0 16px !important;
    gap: 24px !important;
  }
  
  .workflow-step {
    width: 100% !important;
  }
  
  .step-label {
    font-size: 0.95rem !important;
    margin-bottom: 10px !important;
    gap: 6px !important;
  }
  
  .step-label span:first-child {
    width: 28px !important;
    height: 28px !important;
    font-size: 14px !important;
  }
  
  .step-description {
    font-size: 0.85rem !important;
    max-width: 95% !important;
    line-height: 1.5 !important;
  }
  
  .workflow-steps .nt-btn--upload {
    width: 100% !important;
    padding: 18px 32px !important;
    font-size: 1rem !important;
  }
  
  .workflow-steps .nt-btn--perfect-fit {
    width: 100% !important;
    padding: 16px 28px !important;
    font-size: 0.95rem !important;
  }
  
  .workflow-steps .nt-btn--submit-request {
    width: 100% !important;
    padding: 18px 32px !important;
    font-size: 1rem !important;
  }
  
  /* Size Chart */
  .size-chart-container {
    margin: 20px 10px !important;
    max-width: calc(100% - 20px) !important;
  }
  
  .size-chart-table {
    font-size: 0.7rem !important;
  }
  
  .size-chart-table th,
  .size-chart-table td {
    padding: 6px 4px !important;
  }
}

/* Mobile Phones (480px and below) */
@media (max-width: 480px) {
  /* ===== CANVAS ZOOM SLIDER - EXTRA SMALL MOBILE ===== */
  .zoom-bar {
    bottom: 10px !important;
    gap: 6px !important;
    padding: 5px 10px !important;
  }
  
  .zoom-icon {
    font-size: 16px !important;
  }
  
  .zoom-range {
    width: min(70vw, 180px) !important;
    height: 4px !important;
  }
  
  .zoom-range::-webkit-slider-thumb {
    width: 18px !important;
    height: 18px !important;
    border-width: 2px !important;
  }
  
  .zoom-range::-moz-range-thumb {
    width: 18px !important;
    height: 18px !important;
    border-width: 2px !important;
  }
  
  .zoom-label {
    min-width: 44px !important;
    font-size: 12px !important;
  }
  /* ===== END ZOOM SLIDER ===== */
  
  /* Studio Header */
  .studio-title {
    font-size: 1.85rem !important;
    padding: 0 12px !important;
  }
  
  .studio-subtitle {
    font-size: 0.95rem !important;
  }
  
  .studio-description {
    font-size: 0.9rem !important;
  }
  
  /* Design Workspace */
  .design-workspace {
    padding: 16px 10px !important;
    margin: 0 8px !important;
  }
  
  .workspace-title {
    font-size: 1.35rem !important;
  }
  
  /* Mockup Section */
  #nt-mockup-{{ section.id }} {
    padding: 20px 0 10px 0 !important;
  }
  
  .mockup-header {
    margin-bottom: 15px !important;
  }
  
  .mockup-header h1 {
    font-size: 1.75rem !important;
    padding: 0 12px !important;
    margin-bottom: 12px !important;
  }
  
  .mockup-header p {
    font-size: 0.9rem !important;
    padding: 0 12px !important;
  }
  
  /* Canvas */
  .nt-mockup__stage {
    margin-top: 15px !important;
    margin-bottom: 20px !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 0 !important;
  }
  
  .nt-mockup__canvas {
    width: min(95vw, 500px) !important;
    margin: 10px auto 20px auto !important;
    box-sizing: border-box !important;
  }
  
  /* Controls */
  .nt-mockup__controls {
    padding: 12px 10px !important;
    gap: 12px !important;
  }
  
  .canvas-controls-title {
    font-size: 1.35rem !important;
  }
  
  .canvas-controls-subtitle {
    font-size: 0.8rem !important;
  }
  
  /* Buttons */
  .nt-btn {
    padding: 11px 14px !important;
    font-size: 0.8rem !important;
    border-radius: 10px !important;
  }
  
  .nt-btn--upload {
    padding: 15px 20px !important;
    font-size: 0.9rem !important;
  }
  
  .submit-request-btn {
    padding: 15px 20px !important;
    font-size: 0.9rem !important;
  }
  
  /* 3-Step Workflow */
  .workflow-steps {
    margin-top: 20px !important;
    padding: 0 12px !important;
    gap: 20px !important;
  }
  
  .step-label {
    font-size: 0.9rem !important;
    margin-bottom: 8px !important;
    gap: 6px !important;
  }
  
  .step-label span:first-child {
    width: 26px !important;
    height: 26px !important;
    font-size: 13px !important;
  }
  
  .step-description {
    font-size: 0.8rem !important;
    max-width: 100% !important;
  }
  
  .workflow-steps .nt-btn--upload {
    padding: 16px 28px !important;
    font-size: 0.95rem !important;
  }
  
  .workflow-steps .nt-btn--perfect-fit {
    padding: 15px 24px !important;
    font-size: 0.9rem !important;
  }
  
  .workflow-steps .nt-btn--submit-request {
    padding: 16px 28px !important;
    font-size: 0.95rem !important;
  }
  
  /* View Buttons - Stack to single column on small phones */
  .nt-mockup__group:has(.nt-btn--view) .nt-mockup__buttons {
    grid-template-columns: 1fr !important;
  }
  
  /* Color Buttons - Keep 2 columns */
  .nt-mockup__group:has(.nt-btn--color) .nt-mockup__buttons {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  /* 3D Controls - Keep 2 columns */
  .nt-mockup__group:has(.nt-btn--3d) .nt-mockup__buttons {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  /* Size Chart */
  .size-chart-table {
    font-size: 0.65rem !important;
  }
  
  .size-chart-table th,
  .size-chart-table td {
    padding: 5px 3px !important;
  }
}

/* Very Small Phones (375px and below) */
@media (max-width: 375px) {
  /* Studio Header */
  .studio-title {
    font-size: 1.65rem !important;
    padding: 0 10px !important;
  }
  
  .studio-subtitle {
    font-size: 0.9rem !important;
  }
  
  .studio-description {
    font-size: 0.85rem !important;
  }
  
  /* Mockup Header */
  .mockup-header {
    margin-bottom: 12px !important;
  }
  
  .mockup-header h1 {
    font-size: 1.6rem !important;
    padding: 0 10px !important;
    margin-bottom: 10px !important;
  }
  
  .mockup-header p {
    font-size: 0.85rem !important;
    padding: 0 10px !important;
  }
  
  /* Canvas */
  .nt-mockup__stage {
    margin-top: 12px !important;
    margin-bottom: 15px !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 0 !important;
  }
  
  .nt-mockup__canvas {
    width: min(95vw, 400px) !important;
    margin: 8px auto 15px auto !important;
    box-sizing: border-box !important;
  }
  
  /* Controls */
  .canvas-controls-title {
    font-size: 1.25rem !important;
  }
  
  .canvas-controls-subtitle {
    font-size: 0.75rem !important;
  }
  
  /* Buttons */
  .nt-btn {
    padding: 10px 12px !important;
    font-size: 0.75rem !important;
  }
  
  .nt-btn--upload {
    padding: 14px 18px !important;
    font-size: 0.85rem !important;
  }
  
  .submit-request-btn {
    padding: 14px 18px !important;
    font-size: 0.85rem !important;
  }
  
  /* 3-Step Workflow */
  .workflow-steps {
    margin-top: 18px !important;
    padding: 0 10px !important;
    gap: 18px !important;
  }
  
  .step-label {
    font-size: 0.85rem !important;
    margin-bottom: 8px !important;
    gap: 5px !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
  }
  
  .step-label span:first-child {
    width: 24px !important;
    height: 24px !important;
    font-size: 12px !important;
  }
  
  .step-description {
    font-size: 0.75rem !important;
    max-width: 100% !important;
    line-height: 1.5 !important;
  }
  
  .workflow-steps .nt-btn--upload {
    padding: 15px 24px !important;
    font-size: 0.9rem !important;
  }
  
  .workflow-steps .nt-btn--perfect-fit {
    padding: 14px 20px !important;
    font-size: 0.85rem !important;
  }
  
  .workflow-steps .nt-btn--submit-request {
    padding: 15px 24px !important;
    font-size: 0.9rem !important;
  }
  
  /* All buttons stack in single column on very small screens */
  .nt-mockup__buttons {
    grid-template-columns: 1fr !important;
  }
}

/* Extra optimizations for horizontal overflow prevention */
@media (max-width: 768px) {
  * {
    max-width: 100vw;
  }
  
  body,
  html {
    overflow-x: hidden !important;
  }
  
  .custom-designer-container {
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
  
  /* Ensure feature highlights wrap properly */
  div[style*="display: flex"][style*="gap: 25px"] {
    gap: 12px !important;
    padding: 15px 10px !important;
  }
  
  div[style*="display: flex"][style*="gap: 25px"] > div {
    font-size: 0.85rem !important;
  }
  
  div[style*="display: flex"][style*="gap: 25px"] span[style*="padding: 8px 12px"] {
    padding: 6px 10px !important;
    font-size: 0.75rem !important;
  }
}
</style>

{% schema %}
{
  "name": "Custom T-Shirt Studio",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Studio Title",
      "default": "Custom T-Shirt Studio"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Studio Description",
      "default": "Create stunning custom t-shirts with our advanced design tools. Upload your artwork, customize colors, adjust positioning, and see your design come to life in real-time."
    },
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Custom T-Shirt Studio"
    }
  ]
}
{% endschema %}
