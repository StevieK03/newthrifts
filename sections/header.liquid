<header id="Header-{{ section.id }}" class="nt-header" role="banner">
  <div class="nt-header__wrap">
    <!-- Logo -->
    <div class="nt-header__logo">
      {% if section.settings.logo != blank %}
        <a href="{{ routes.root_url }}" class="nt-header__logo-link">
          <img src="{{ section.settings.logo | img_url: '200x' }}" alt="{{ shop.name }}" class="nt-header__logo-img">
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="nt-header__logo-text">{{ section.settings.logo_text }}</a>
      {% endif %}
    </div>

    <!-- Navigation -->
    <nav class="nt-header__nav" aria-label="Main navigation">
      {% assign menu = section.settings.menu %}
      {% if menu != blank %}
        <ul class="nt-header__list">
          {% for link in menu.links %}
            <li><a href="{{ link.url }}" class="nt-header__link">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
      {% else %}
        <!-- Fallback links if no menu chosen in settings -->
        <ul class="nt-header__list">
          <li><a href="/collections/all" class="nt-header__link">Shop</a></li>
          <li><a href="/pages/about" class="nt-header__link">About</a></li>
          <li><a href="/pages/contact" class="nt-header__link">Contact</a></li>
        </ul>
      {% endif %}
      
      <!-- Wishlist Toggle -->
      <div class="header-wishlist">
        <div class="wishlist-toggle" id="header-wishlist-toggle" aria-label="Toggle wishlist">
          <svg class="wishlist-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path class="heart-outline" d="M20.84 4.61C20.32 4.09 19.69 3.69 19 3.44C18.31 3.19 17.58 3.09 16.85 3.15C16.12 3.21 15.42 3.42 14.78 3.78C14.14 4.14 13.58 4.64 13.14 5.25L12 6.75L10.86 5.25C10.42 4.64 9.86 4.14 9.22 3.78C8.58 3.42 7.88 3.21 7.15 3.15C6.42 3.09 5.69 3.19 5 3.44C4.31 3.69 3.68 4.09 3.16 4.61C2.11 5.66 1.5 7.13 1.5 8.66C1.5 10.19 2.11 11.66 3.16 12.71L12 21.55L20.84 12.71C21.89 11.66 22.5 10.19 22.5 8.66C22.5 7.13 21.89 5.66 20.84 4.61Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path class="heart-filled" d="M20.84 4.61C20.32 4.09 19.69 3.69 19 3.44C18.31 3.19 17.58 3.09 16.85 3.15C16.12 3.21 15.42 3.42 14.78 3.78C14.14 4.14 13.58 4.64 13.14 5.25L12 6.75L10.86 5.25C10.42 4.64 9.86 4.14 9.22 3.78C8.58 3.42 7.88 3.21 7.15 3.15C6.42 3.09 5.69 3.19 5 3.44C4.31 3.69 3.68 4.09 3.16 4.61C2.11 5.66 1.5 7.13 1.5 8.66C1.5 10.19 2.11 11.66 3.16 12.71L12 21.55L20.84 12.71C21.89 11.66 22.5 10.19 22.5 8.66C22.5 7.13 21.89 5.66 20.84 4.61Z" fill="currentColor" style="display: none;"/>
          </svg>
          <span class="wishlist-count" id="header-wishlist-count">0</span>
        </div>
      </div>
    </nav>
  </div>
</header>

<style>
  /* ===== Hard-force a white header and dark text ===== */
  #Header-{{ section.id }}{
    background:#ffffff !important;
    position:relative;
    z-index:50;
    box-shadow: 0 2px 10px rgba(0,0,0,.05);
  }
  #Header-{{ section.id }} *{ box-sizing:border-box }
  #Header-{{ section.id }} .nt-header__wrap{
    display:flex; align-items:center; justify-content:space-between;
    padding:15px 20px;
    backdrop-filter:none !important; -webkit-backdrop-filter:none !important;
  }
  #Header-{{ section.id }} .nt-header__logo-img{ max-height:60px; display:block }
  #Header-{{ section.id }} .nt-header__logo-text{
    font-weight:800; text-decoration:none;
    color:#0f172a !important; /* dark text */
    font-size:1.25rem;
  }
  #Header-{{ section.id }} .nt-header__list{
    display:flex; gap:20px; list-style:none; margin:0; padding:0;
  }
  #Header-{{ section.id }} .nt-header__link{
    text-decoration:none; color:#0f172a !important; font-weight:600;
  }
  
  /* Header Wishlist Styling */
  #Header-{{ section.id }} .header-wishlist {
    margin-left: 20px;
  }
  
  #Header-{{ section.id }} .wishlist-toggle {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  #Header-{{ section.id }} .wishlist-toggle:hover {
    border-color: #dc2626;
    transform: scale(1.05);
    box-shadow: 0 4px 16px rgba(220, 38, 38, 0.2);
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items {
    border-color: #dc2626;
    background: #fef2f2;
  }
  
  #Header-{{ section.id }} .wishlist-icon {
    color: #6b7280;
    transition: color 0.3s ease;
  }
  
  #Header-{{ section.id }} .wishlist-toggle:hover .wishlist-icon,
  #Header-{{ section.id }} .wishlist-toggle.has-items .wishlist-icon {
    color: #dc2626;
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items .heart-outline {
    display: none;
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items .heart-filled {
    display: block !important;
  }
  
  #Header-{{ section.id }} .wishlist-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #dc2626;
    color: white;
    font-size: 12px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s ease;
  }
  
  #Header-{{ section.id }} .wishlist-count.visible {
    opacity: 1;
    transform: scale(1);
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    { 
      "type": "image_picker", 
      "id": "logo", 
      "label": "Upload Your Logo",
      "info": "Recommended size: 400px wide. PNG with transparent background works best."
    },
    { 
      "type": "text", 
      "id": "logo_text", 
      "label": "Logo text (fallback)", 
      "default": "New Thrifts",
      "info": "Used when no logo image is uploaded"
    },
    { "type": "link_list", "id": "menu", "label": "Main menu" }
  ]
}
{% endschema %}
