<header id="Header-{{ section.id }}" class="nt-header" role="banner">
  <div class="nt-header__wrap">
    <!-- Logo -->
    <div class="nt-header__logo">
      {% if section.settings.logo != blank %}
        <a href="{{ routes.root_url }}" class="nt-header__logo-link">
          <img src="{{ section.settings.logo | img_url: '200x' }}" alt="{{ shop.name }}" class="nt-header__logo-img">
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="nt-header__logo-text">{{ section.settings.logo_text }}</a>
      {% endif %}
    </div>

    <!-- Navigation -->
    <nav class="nt-header__nav" aria-label="Main navigation">
      {% assign menu = section.settings.menu %}
      {% if menu != blank %}
        <ul class="nt-header__list">
          {% for link in menu.links %}
            <li><a href="{{ link.url }}" class="nt-header__link">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
      {% else %}
        <!-- Fallback links if no menu chosen in settings -->
        <ul class="nt-header__list">
          <li><a href="/collections/all" class="nt-header__link">Shop</a></li>
          <li><a href="/pages/about" class="nt-header__link">About</a></li>
          <li><a href="/pages/contact" class="nt-header__link">Contact</a></li>
        </ul>
      {% endif %}
      
      <!-- Wishlist Toggle -->
      <div class="header-wishlist">
        <div class="wishlist-toggle" id="header-wishlist-toggle" aria-label="Toggle wishlist">
          <svg class="wishlist-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path class="heart-outline" d="M20.84 4.61C20.32 4.09 19.69 3.69 19 3.44C18.31 3.19 17.58 3.09 16.85 3.15C16.12 3.21 15.42 3.42 14.78 3.78C14.14 4.14 13.58 4.64 13.14 5.25L12 6.75L10.86 5.25C10.42 4.64 9.86 4.14 9.22 3.78C8.58 3.42 7.88 3.21 7.15 3.15C6.42 3.09 5.69 3.19 5 3.44C4.31 3.69 3.68 4.09 3.16 4.61C2.11 5.66 1.5 7.13 1.5 8.66C1.5 10.19 2.11 11.66 3.16 12.71L12 21.55L20.84 12.71C21.89 11.66 22.5 10.19 22.5 8.66C22.5 7.13 21.89 5.66 20.84 4.61Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path class="heart-filled" d="M20.84 4.61C20.32 4.09 19.69 3.69 19 3.44C18.31 3.19 17.58 3.09 16.85 3.15C16.12 3.21 15.42 3.42 14.78 3.78C14.14 4.14 13.58 4.64 13.14 5.25L12 6.75L10.86 5.25C10.42 4.64 9.86 4.14 9.22 3.78C8.58 3.42 7.88 3.21 7.15 3.15C6.42 3.09 5.69 3.19 5 3.44C4.31 3.69 3.68 4.09 3.16 4.61C2.11 5.66 1.5 7.13 1.5 8.66C1.5 10.19 2.11 11.66 3.16 12.71L12 21.55L20.84 12.71C21.89 11.66 22.5 10.19 22.5 8.66C22.5 7.13 21.89 5.66 20.84 4.61Z" fill="currentColor" style="display: none;"/>
          </svg>
          <span class="wishlist-count" id="header-wishlist-count">0</span>
        </div>
      </div>
    </nav>
  </div>
</header>

<style>
  /* ===== Seamless header that blends with main background ===== */
  #Header-{{ section.id }}{
    background: 
      radial-gradient(1500px 800px at 80% -10%, rgba(255, 255, 255, 0.25), transparent),
      radial-gradient(1200px 900px at 10% 110%, rgba(255, 255, 255, 0.18), transparent),
      rgb(13, 220, 243) !important;
    position:relative;
    z-index:50;
    box-shadow: 0 2px 15px rgba(0,0,0,.1);
    border-bottom: 1px solid rgba(255,255,255,.2);
  }
  #Header-{{ section.id }} *{ box-sizing:border-box }
  #Header-{{ section.id }} .nt-header__wrap{
    display:flex; align-items:center; justify-content:center;
    padding:15px 40px;
    backdrop-filter:none !important; -webkit-backdrop-filter:none !important;
    gap: 60px;
    max-width: 1200px;
    margin: 0 auto;
  }
  #Header-{{ section.id }} .nt-header__logo-img{ max-height:60px; display:block }
  #Header-{{ section.id }} .nt-header__logo-text{
    font-weight:800; text-decoration:none;
    color:#ffffff !important; /* white text for better contrast */
    font-size:1.25rem;
    text-shadow: 0 2px 4px rgba(0,0,0,.3);
  }
  #Header-{{ section.id }} .nt-header__list{
    display:flex; gap:8px; list-style:none; margin:0; padding:0;
  }
  #Header-{{ section.id }} .nt-header__link{
    text-decoration:none; 
    color:#ffffff !important; 
    font-weight:600;
    padding: 12px 20px;
    border-radius: 25px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    background: rgba(255,255,255,.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.2);
  }
  
  #Header-{{ section.id }} .nt-header__link:hover{
    background: rgba(255,255,255,.2);
    color: #ffffff !important;
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0,0,0,.15);
    border-color: rgba(255,255,255,.4);
  }
  
  #Header-{{ section.id }} .nt-header__link::before{
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(39,225,193,.3), transparent);
    transition: left 0.5s ease;
  }
  
  #Header-{{ section.id }} .nt-header__link:hover::before{
    left: 100%;
  }
  
  /* Header Wishlist Styling */
  #Header-{{ section.id }} .header-wishlist {
    margin-left: 20px;
  }
  
  #Header-{{ section.id }} .wishlist-toggle {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: rgba(255,255,255,.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.3);
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  #Header-{{ section.id }} .wishlist-toggle:hover {
    background: rgba(255,255,255,.25);
    border-color: rgba(255,255,255,.5);
    transform: scale(1.05);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items {
    background: rgba(220, 38, 38, 0.2);
    border-color: rgba(220, 38, 38, 0.4);
  }
  
  #Header-{{ section.id }} .wishlist-icon {
    color: #ffffff;
    transition: color 0.3s ease;
  }
  
  #Header-{{ section.id }} .wishlist-toggle:hover .wishlist-icon {
    color: #ffffff;
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items .wishlist-icon {
    color: #dc2626;
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items .heart-outline {
    display: none;
  }
  
  #Header-{{ section.id }} .wishlist-toggle.has-items .heart-filled {
    display: block !important;
  }
  
  #Header-{{ section.id }} .wishlist-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #dc2626;
    color: white;
    font-size: 12px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s ease;
  }
  
  #Header-{{ section.id }} .wishlist-count.visible {
    opacity: 1;
    transform: scale(1);
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    { 
      "type": "image_picker", 
      "id": "logo", 
      "label": "Upload Your Logo",
      "info": "Recommended size: 400px wide. PNG with transparent background works best."
    },
    { 
      "type": "text", 
      "id": "logo_text", 
      "label": "Logo text (fallback)", 
      "default": "New Thrifts",
      "info": "Used when no logo image is uploaded"
    },
    { "type": "link_list", "id": "menu", "label": "Main menu" }
  ]
}
{% endschema %}
